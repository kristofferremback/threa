<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Threa Design System - Kitchen Sink Reference</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* ========================================
         CSS VARIABLES - Golden Thread Theme
         ======================================== */
      :root {
        --background: 40 20% 98%;
        --foreground: 30 10% 12%;
        --card: 40 15% 99%;
        --card-foreground: 30 10% 12%;
        --primary: 38 65% 50%;
        --primary-foreground: 40 20% 98%;
        --secondary: 35 15% 93%;
        --secondary-foreground: 30 10% 25%;
        --muted: 35 12% 93%;
        --muted-foreground: 30 8% 45%;
        --accent: 38 70% 55%;
        --accent-foreground: 30 10% 12%;
        --border: 35 15% 88%;
        --input: 35 15% 88%;
        --ring: 38 65% 50%;
        --destructive: 0 84% 60%;
        --success: 142 76% 36%;
      }

      .dark {
        --background: 30 15% 8%;
        --foreground: 35 15% 92%;
        --card: 30 12% 11%;
        --card-foreground: 35 15% 92%;
        --primary: 40 55% 55%;
        --primary-foreground: 30 15% 8%;
        --secondary: 30 10% 18%;
        --secondary-foreground: 35 15% 85%;
        --muted: 30 10% 15%;
        --muted-foreground: 35 10% 55%;
        --accent: 40 60% 50%;
        --accent-foreground: 35 15% 92%;
        --border: 30 10% 20%;
        --input: 30 10% 20%;
        --ring: 40 55% 55%;
      }

      /* ========================================
         TYPOGRAPHY - Space Grotesk
         ======================================== */
      body {
        font-family:
          "Space Grotesk",
          system-ui,
          -apple-system,
          sans-serif;
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        line-height: 1.6;
      }

      /* Accessibility: System font option */
      [data-font-family="system"] body {
        font-family:
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          sans-serif;
      }

      /* ========================================
         LAYOUT & SECTIONS
         ======================================== */
      .kitchen-sink {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 24px;
      }

      .section {
        margin-bottom: 64px;
        padding-bottom: 48px;
        border-bottom: 1px solid hsl(var(--border));
      }
      .section:last-child {
        border-bottom: none;
      }

      .section-header {
        margin-bottom: 24px;
      }
      .section-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 8px;
        color: hsl(var(--foreground));
      }
      .section-subtitle {
        font-size: 14px;
        color: hsl(var(--muted-foreground));
      }
      .section-ref {
        display: inline-block;
        font-size: 11px;
        font-weight: 500;
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
        padding: 2px 8px;
        border-radius: 4px;
        margin-top: 8px;
      }

      .component-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 24px;
      }

      .component-card {
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        padding: 20px;
      }
      .component-label {
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: hsl(var(--muted-foreground));
        margin-bottom: 16px;
      }

      .demo-container {
        background: hsl(var(--muted) / 0.3);
        border-radius: 8px;
        padding: 16px;
        margin-top: 12px;
      }

      /* ========================================
         1. MESSAGE INPUT - Premium Glow Style
         ======================================== */
      .premium-input-container {
        position: relative;
      }

      .premium-input-box {
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 16px;
        padding: 12px;
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px hsl(var(--foreground) / 0.03);
      }

      .premium-input-box:focus-within {
        border-color: hsl(var(--primary) / 0.5);
        box-shadow:
          0 0 0 3px hsl(var(--primary) / 0.1),
          0 0 20px hsl(var(--primary) / 0.15),
          0 4px 12px hsl(var(--foreground) / 0.05);
      }

      .premium-input-box:focus-within::before {
        content: "";
        position: absolute;
        inset: -1px;
        border-radius: 17px;
        background: linear-gradient(135deg, hsl(var(--primary) / 0.3), transparent 50%);
        z-index: -1;
        opacity: 0.5;
      }

      .attachment-bar {
        display: flex;
        gap: 8px;
        padding: 8px 0;
        margin-bottom: 8px;
        border-bottom: 1px solid hsl(var(--border) / 0.5);
        flex-wrap: wrap;
        max-height: 120px;
        overflow-y: auto;
      }

      .attachment-bar:empty {
        display: none;
      }

      .attachment-chip {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 500;
      }

      /* Style 1: Primary Accent - Uploaded */
      .attachment-chip.uploaded {
        background: hsl(var(--primary) / 0.1);
        border: 1px solid hsl(var(--primary) / 0.3);
        color: hsl(var(--primary));
      }

      /* Style 3: Dashed Mono - Uploading */
      .attachment-chip.uploading {
        background: transparent;
        border: 1px dashed hsl(var(--muted-foreground) / 0.4);
        color: hsl(var(--muted-foreground));
      }

      .attachment-chip svg {
        width: 14px;
        height: 14px;
      }

      .attachment-chip .remove-btn {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        opacity: 0.6;
        transition: opacity 0.15s;
      }
      .attachment-chip .remove-btn:hover {
        opacity: 1;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .spinner {
        animation: spin 1s linear infinite;
      }

      .input-row {
        display: flex;
        align-items: flex-end;
        gap: 8px;
      }

      .expand-btn {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: hsl(var(--muted) / 0.5);
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        transition: all 0.15s;
        flex-shrink: 0;
      }
      .expand-btn:hover {
        background: hsl(var(--primary) / 0.1);
        color: hsl(var(--primary));
      }

      .text-input-wrapper {
        flex: 1;
        min-height: 40px;
        max-height: 200px;
        overflow-y: auto;
      }

      .text-input {
        width: 100%;
        min-height: 40px;
        padding: 8px 12px;
        border: none;
        background: transparent;
        font-size: 14px;
        font-family: inherit;
        color: hsl(var(--foreground));
        resize: none;
        outline: none;
      }
      .text-input::placeholder {
        color: hsl(var(--muted-foreground));
      }

      .send-btn {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        cursor: pointer;
        transition: all 0.15s;
        flex-shrink: 0;
      }
      .send-btn:hover {
        filter: brightness(1.1);
        transform: scale(1.02);
      }
      .send-btn svg {
        width: 18px;
        height: 18px;
      }

      /* ========================================
         2. FORMATTING TOOLBAR - Always Visible
         ======================================== */
      .formatting-toolbar {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 8px 0;
        margin-bottom: 8px;
        border-bottom: 1px solid hsl(var(--border) / 0.5);
      }

      .toolbar-btn {
        width: 28px;
        height: 28px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        transition: all 0.15s;
      }
      .toolbar-btn:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }
      .toolbar-btn.active {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .toolbar-btn svg {
        width: 16px;
        height: 16px;
      }

      .toolbar-divider {
        width: 1px;
        height: 20px;
        background: hsl(var(--border));
        margin: 0 4px;
      }

      /* ========================================
         3. FLOATING SELECTION TOOLBAR - Icon Only
         ======================================== */
      .floating-toolbar {
        display: inline-flex;
        align-items: center;
        gap: 2px;
        padding: 4px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        box-shadow:
          0 4px 12px hsl(var(--foreground) / 0.1),
          0 2px 4px hsl(var(--foreground) / 0.05);
      }

      .floating-toolbar-btn {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: hsl(var(--foreground));
        cursor: pointer;
        transition: all 0.15s;
      }
      .floating-toolbar-btn:hover {
        background: hsl(var(--muted));
      }
      .floating-toolbar-btn.active {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .floating-toolbar-btn svg {
        width: 16px;
        height: 16px;
      }

      /* ========================================
         4. INLINE REFERENCE NODES
         ======================================== */
      .inline-ref {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 8px;
        background: hsl(var(--primary) / 0.15);
        border: 1px solid hsl(var(--primary) / 0.25);
        border-radius: 4px;
        font-size: 13px;
        font-weight: 500;
        color: hsl(var(--primary));
        cursor: default;
        vertical-align: middle;
      }
      .inline-ref svg {
        width: 12px;
        height: 12px;
      }

      /* ========================================
         5. EMOJI PICKER - Standard with Categories
         ======================================== */
      .emoji-picker {
        width: 320px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        box-shadow: 0 8px 24px hsl(var(--foreground) / 0.12);
        overflow: hidden;
      }

      .emoji-picker-header {
        padding: 12px;
        border-bottom: 1px solid hsl(var(--border));
      }

      .emoji-search {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        background: hsl(var(--background));
        font-size: 13px;
        font-family: inherit;
        color: hsl(var(--foreground));
        outline: none;
      }
      .emoji-search:focus {
        border-color: hsl(var(--primary));
      }

      .emoji-categories {
        display: flex;
        gap: 4px;
        padding: 8px 12px;
        border-bottom: 1px solid hsl(var(--border));
      }

      .emoji-category-btn {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.15s;
      }
      .emoji-category-btn:hover {
        background: hsl(var(--muted));
      }
      .emoji-category-btn.active {
        background: hsl(var(--primary) / 0.15);
      }

      .emoji-grid {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 2px;
        padding: 12px;
        max-height: 200px;
        overflow-y: auto;
      }

      .emoji-item {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.1s;
      }
      .emoji-item:hover {
        background: hsl(var(--muted));
        transform: scale(1.15);
      }

      /* Inline emoji search (no top bar) */
      .emoji-inline-search {
        padding: 8px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        box-shadow: 0 4px 12px hsl(var(--foreground) / 0.1);
      }
      .emoji-inline-search .emoji-grid {
        padding: 8px 0 0 0;
        max-height: 150px;
      }

      /* ========================================
         6. SLASH COMMANDS - Floating Pill Style
         ======================================== */
      .slash-popover {
        width: 280px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        box-shadow: 0 8px 24px hsl(var(--foreground) / 0.12);
        padding: 6px;
        max-height: 320px;
        overflow-y: auto;
      }

      .slash-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.1s;
      }
      .slash-item:hover,
      .slash-item.selected {
        background: hsl(var(--muted));
      }

      .slash-icon {
        width: 28px;
        height: 28px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        flex-shrink: 0;
      }
      .slash-icon.backend {
        background: hsl(280 60% 55% / 0.15);
        color: hsl(280 60% 55%);
      }
      .slash-icon.frontend {
        background: hsl(200 70% 50% / 0.15);
        color: hsl(200 70% 50%);
      }
      .slash-icon.ai {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }

      .slash-content {
        flex: 1;
        min-width: 0;
      }
      .slash-name {
        font-size: 13px;
        font-weight: 500;
        color: hsl(var(--foreground));
      }
      .slash-desc {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .slash-shortcut {
        font-size: 10px;
        padding: 2px 6px;
        background: hsl(var(--muted));
        border-radius: 4px;
        color: hsl(var(--muted-foreground));
        font-family: monospace;
      }

      /* ========================================
         7. MENTIONS - Floating Compact
         ======================================== */
      .mention-popover {
        width: 240px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 10px;
        box-shadow: 0 8px 24px hsl(var(--foreground) / 0.12);
        padding: 4px;
        max-height: 280px;
        overflow-y: auto;
      }

      .mention-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.1s;
      }
      .mention-item:hover,
      .mention-item.selected {
        background: hsl(var(--muted));
      }

      .mention-avatar {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
        flex-shrink: 0;
      }
      .mention-avatar.user {
        background: hsl(200 70% 50% / 0.15);
        color: hsl(200 70% 50%);
      }
      .mention-avatar.ai {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .mention-avatar.channel {
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
        font-size: 14px;
      }

      .mention-info {
        flex: 1;
        min-width: 0;
      }
      .mention-name {
        font-size: 13px;
        font-weight: 500;
        color: hsl(var(--foreground));
      }
      .mention-detail {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
      }

      /* Inline mention styles */
      .inline-mention {
        display: inline;
        padding: 1px 4px;
        border-radius: 4px;
        font-weight: 500;
        cursor: pointer;
      }
      .inline-mention.user {
        background: hsl(200 70% 50% / 0.1);
        color: hsl(200 70% 50%);
      }
      .inline-mention.ai {
        background: hsl(var(--primary) / 0.1);
        color: hsl(var(--primary));
      }
      .inline-mention.channel {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }
      .inline-mention.me {
        background: hsl(200 70% 50% / 0.15);
        color: hsl(var(--primary));
        font-weight: 600;
      }

      /* ========================================
         MESSAGE CONTENT FORMATTING
         ======================================== */
      .rendered-content {
        font-size: 14px;
        line-height: 1.6;
      }

      .rendered-content strong,
      .rendered-content b {
        font-weight: 600;
      }

      .rendered-content em,
      .rendered-content i {
        font-style: italic;
      }

      .rendered-content s,
      .rendered-content del {
        text-decoration: line-through;
        color: hsl(var(--muted-foreground));
      }

      .rendered-content code {
        font-family: "SF Mono", "Fira Code", "Consolas", monospace;
        font-size: 0.9em;
        padding: 2px 6px;
        border-radius: 4px;
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }

      .rendered-content pre {
        margin: 12px 0;
        padding: 14px;
        border-radius: 10px;
        background: hsl(var(--muted) / 0.5);
        border: 1px solid hsl(var(--border));
        overflow-x: auto;
      }

      .rendered-content pre code {
        padding: 0;
        background: transparent;
        font-size: 13px;
        line-height: 1.5;
      }

      /* ========================================
         CODE BLOCK WITH HEADER (Linear-style)
         ======================================== */
      .code-block {
        position: relative;
        margin: 12px 0;
        border-radius: 10px;
        background: hsl(var(--muted) / 0.5);
        border: 1px solid hsl(var(--border));
        overflow: hidden;
      }
      .code-block-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        background: hsl(var(--muted) / 0.5);
        border-bottom: 1px solid hsl(var(--border));
        min-height: 36px;
      }
      .code-block-filename {
        font-size: 12px;
        font-weight: 500;
        color: hsl(var(--muted-foreground));
        font-family: "SF Mono", "Fira Code", monospace;
      }
      .code-block-actions {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      /* Language picker (editing mode) */
      .language-picker {
        position: relative;
      }
      .language-picker-btn {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 4px 8px;
        border-radius: 4px;
        background: transparent;
        border: none;
        color: hsl(var(--muted-foreground));
        font-size: 11px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s ease;
      }
      .language-picker-btn:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }
      .language-picker-btn svg {
        width: 12px;
        height: 12px;
      }
      .language-picker-dropdown {
        position: absolute;
        top: calc(100% + 4px);
        right: 0;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        box-shadow: 0 4px 12px hsl(0 0% 0% / 0.15);
        padding: 4px;
        min-width: 140px;
        max-height: 280px;
        overflow-y: auto;
        z-index: 100;
      }
      .language-picker-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 13px;
        color: hsl(var(--foreground));
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .language-picker-item:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .language-picker-item.selected {
        color: hsl(var(--primary));
      }
      .language-picker-item svg {
        width: 14px;
        height: 14px;
        color: hsl(var(--primary));
      }

      /* Copy button (viewing mode - appears on hover) */
      .code-block-copy {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 6px;
        background: hsl(var(--muted));
        border: none;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        opacity: 0;
        transition: all 0.15s ease;
      }
      .code-block:hover .code-block-copy {
        opacity: 1;
      }
      .code-block-copy:hover {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .code-block-copy.copied {
        background: hsl(var(--success) / 0.15);
        color: hsl(var(--success));
      }
      .code-block-copy svg {
        width: 14px;
        height: 14px;
      }

      .code-block-body {
        padding: 14px;
        overflow-x: auto;
      }
      .code-block-body code {
        font-family: "SF Mono", "Fira Code", "Consolas", monospace;
        font-size: 13px;
        line-height: 1.5;
        color: hsl(var(--foreground));
      }

      /* Syntax highlighting (basic) */
      .code-block .token-keyword {
        color: hsl(280 60% 65%);
      }
      .code-block .token-string {
        color: hsl(100 50% 45%);
      }
      .code-block .token-comment {
        color: hsl(var(--muted-foreground));
        font-style: italic;
      }
      .code-block .token-function {
        color: hsl(200 70% 55%);
      }
      .code-block .token-number {
        color: hsl(30 80% 55%);
      }

      /* ========================================
         IMAGE ATTACHMENTS & GALLERY
         ======================================== */
      .message-attachments {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-top: 8px;
      }
      .image-preview-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .image-preview {
        position: relative;
        border-radius: 8px;
        overflow: hidden;
        cursor: pointer;
        border: 1px solid hsl(var(--border));
        transition: all 0.15s ease;
      }
      .image-preview:hover {
        border-color: hsl(var(--primary) / 0.5);
        box-shadow: 0 2px 8px hsl(0 0% 0% / 0.1);
      }
      .image-preview img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .image-preview.single {
        max-width: 400px;
        max-height: 300px;
      }
      .image-preview.multi {
        width: 180px;
        height: 180px;
      }
      .image-preview-overlay {
        position: absolute;
        inset: 0;
        background: hsl(0 0% 0% / 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
        font-weight: 600;
        opacity: 0;
        transition: opacity 0.15s ease;
      }
      .image-preview:hover .image-preview-overlay {
        opacity: 1;
      }
      .image-preview.more .image-preview-overlay {
        opacity: 1;
        background: hsl(0 0% 0% / 0.6);
      }

      /* Attachment pills below images */
      .attachment-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .attachment-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        border-radius: 16px;
        background: hsl(var(--muted));
        font-size: 12px;
        color: hsl(var(--foreground));
        cursor: pointer;
        transition: all 0.15s ease;
      }
      .attachment-pill:hover {
        background: hsl(var(--muted-foreground) / 0.2);
      }
      .attachment-pill svg {
        width: 14px;
        height: 14px;
        color: hsl(var(--muted-foreground));
      }
      .attachment-pill.image {
        background: hsl(var(--primary) / 0.1);
        color: hsl(var(--primary));
      }
      .attachment-pill.image svg {
        color: hsl(var(--primary));
      }

      /* Full-screen gallery */
      .gallery-overlay {
        position: fixed;
        inset: 0;
        background: hsl(0 0% 0% / 0.95);
        display: flex;
        flex-direction: column;
        z-index: 1000;
      }
      .gallery-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 24px;
        color: white;
      }
      .gallery-title {
        font-size: 14px;
        font-weight: 500;
        color: hsl(0 0% 70%);
      }
      .gallery-actions {
        display: flex;
        gap: 8px;
      }
      .gallery-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 8px;
        background: hsl(0 0% 100% / 0.1);
        border: none;
        color: white;
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .gallery-btn:hover {
        background: hsl(0 0% 100% / 0.2);
      }
      .gallery-btn svg {
        width: 20px;
        height: 20px;
      }
      .gallery-main {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        position: relative;
      }
      .gallery-main img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 4px;
      }
      .gallery-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: hsl(0 0% 100% / 0.1);
        border: none;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.15s ease;
      }
      .gallery-nav:hover {
        background: hsl(0 0% 100% / 0.2);
      }
      .gallery-nav.prev {
        left: 24px;
      }
      .gallery-nav.next {
        right: 24px;
      }
      .gallery-nav svg {
        width: 24px;
        height: 24px;
      }
      .gallery-thumbnails {
        display: flex;
        justify-content: center;
        gap: 8px;
        padding: 16px 24px 24px;
        background: hsl(0 0% 0% / 0.5);
      }
      .gallery-thumb {
        width: 64px;
        height: 64px;
        border-radius: 6px;
        overflow: hidden;
        cursor: pointer;
        border: 2px solid transparent;
        opacity: 0.5;
        transition: all 0.15s ease;
      }
      .gallery-thumb:hover {
        opacity: 0.8;
      }
      .gallery-thumb.active {
        border-color: white;
        opacity: 1;
      }
      .gallery-thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .gallery-counter {
        text-align: center;
        padding-bottom: 8px;
        font-size: 13px;
        color: hsl(0 0% 60%);
      }

      .rendered-content a {
        color: hsl(var(--primary));
        text-decoration: underline;
        text-underline-offset: 2px;
        text-decoration-color: hsl(var(--primary) / 0.4);
        transition: text-decoration-color 0.15s;
      }
      .rendered-content a:hover {
        text-decoration-color: hsl(var(--primary));
      }

      .rendered-content blockquote {
        margin: 12px 0;
        padding: 8px 16px;
        border-left: 3px solid hsl(var(--border));
        color: hsl(var(--muted-foreground));
        font-style: italic;
      }

      .rendered-content ul,
      .rendered-content ol {
        margin: 8px 0;
        padding-left: 24px;
      }

      .rendered-content li {
        margin: 4px 0;
      }

      .rendered-content ul li {
        list-style-type: disc;
      }

      .rendered-content ol li {
        list-style-type: decimal;
      }

      /* Slash command in message (executed) */
      .inline-command {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 8px;
        border-radius: 4px;
        background: hsl(280 60% 55% / 0.1);
        color: hsl(280 60% 55%);
        font-size: 13px;
        font-weight: 500;
        font-family: "SF Mono", "Fira Code", monospace;
      }

      /* ========================================
         8. DOCUMENT EDITOR MODAL
         ======================================== */
      .doc-editor-modal {
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 16px;
        box-shadow: 0 24px 48px hsl(var(--foreground) / 0.2);
        width: 100%;
        max-width: 700px;
        display: flex;
        flex-direction: column;
        max-height: 600px;
      }

      .doc-editor-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        border-bottom: 1px solid hsl(var(--border));
      }

      .doc-editor-title {
        font-size: 16px;
        font-weight: 600;
      }

      .doc-editor-close {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        transition: all 0.15s;
      }
      .doc-editor-close:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }

      .doc-editor-toolbar {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 12px 20px;
        border-bottom: 1px solid hsl(var(--border));
        flex-wrap: wrap;
      }

      .doc-editor-body {
        flex: 1;
        padding: 20px;
        min-height: 200px;
        overflow-y: auto;
      }

      .doc-editor-textarea {
        width: 100%;
        min-height: 180px;
        border: none;
        background: transparent;
        font-size: 14px;
        font-family: inherit;
        color: hsl(var(--foreground));
        resize: none;
        outline: none;
        line-height: 1.7;
      }

      .doc-editor-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        border-top: 1px solid hsl(var(--border));
      }

      .doc-editor-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 500;
        font-family: inherit;
        cursor: pointer;
        transition: all 0.15s;
      }

      .btn-ghost {
        background: transparent;
        color: hsl(var(--muted-foreground));
        border: none;
      }
      .btn-ghost:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }

      .btn-outline {
        background: transparent;
        color: hsl(var(--foreground));
        border: 1px solid hsl(var(--border));
      }
      .btn-outline:hover {
        background: hsl(var(--muted));
      }

      .btn-primary {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        border: none;
      }
      .btn-primary:hover {
        filter: brightness(1.1);
      }

      /* ========================================
         9. CONVERSATIONS OVERVIEW
         ======================================== */
      .stream-list {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .stream-section-header {
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: hsl(var(--muted-foreground));
        padding: 12px 12px 8px;
      }

      .stream-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 12px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.1s;
        position: relative;
      }
      .stream-item:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .stream-item.active {
        background: hsl(var(--primary) / 0.1);
      }

      .stream-avatar {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        flex-shrink: 0;
        position: relative;
      }
      .stream-avatar.channel {
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
      }
      .stream-avatar.scratchpad {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .stream-avatar.dm {
        background: hsl(200 70% 50% / 0.15);
        color: hsl(200 70% 50%);
        font-weight: 600;
        font-size: 12px;
      }

      .activity-dot {
        position: absolute;
        top: -2px;
        right: -2px;
        width: 10px;
        height: 10px;
        background: hsl(var(--primary));
        border-radius: 50%;
        border: 2px solid hsl(var(--card));
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .stream-content {
        flex: 1;
        min-width: 0;
      }

      .stream-header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
      }

      .stream-name {
        font-size: 14px;
        font-weight: 500;
        color: hsl(var(--foreground));
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .stream-time {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
        flex-shrink: 0;
      }

      .stream-preview {
        font-size: 12px;
        color: hsl(var(--muted-foreground));
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-top: 2px;
      }
      .stream-preview strong {
        color: hsl(var(--foreground) / 0.8);
        font-weight: 500;
      }

      .unread-badge {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        font-size: 10px;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 10px;
        min-width: 18px;
        text-align: center;
      }

      .stream-hover-actions {
        display: none;
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        gap: 4px;
      }
      .stream-item:hover .stream-hover-actions {
        display: flex;
      }

      .hover-action-btn {
        width: 28px;
        height: 28px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: hsl(var(--muted-foreground));
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        cursor: pointer;
        transition: all 0.1s;
      }
      .hover-action-btn:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }
      .hover-action-btn svg {
        width: 14px;
        height: 14px;
      }

      /* ========================================
         10. THREAD PANEL - Hybrid Resizable
         ======================================== */
      .thread-panel {
        width: 440px;
        background: hsl(var(--card));
        border-left: 1px solid hsl(var(--border));
        display: flex;
        flex-direction: column;
        height: 400px;
      }

      .thread-panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        border-bottom: 1px solid hsl(var(--border));
      }

      .thread-tabs {
        display: flex;
        gap: 4px;
      }

      .thread-tab {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 13px;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        transition: all 0.1s;
        max-width: 150px;
      }
      .thread-tab:hover {
        background: hsl(var(--muted) / 0.5);
        color: hsl(var(--foreground));
      }
      .thread-tab.active {
        background: hsl(var(--primary) / 0.1);
        color: hsl(var(--primary));
      }

      .thread-tab-title {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .thread-actions {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .thread-action {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        transition: all 0.1s;
      }
      .thread-action:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }
      .thread-action.active {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .thread-action svg {
        width: 16px;
        height: 16px;
      }

      /* Breadcrumbs */
      .thread-breadcrumb {
        display: flex;
        align-items: center;
        gap: 5px;
        padding: 6px 14px;
        background: hsl(var(--muted) / 0.2);
        font-size: 11px;
        border-bottom: 1px solid hsl(var(--border));
        overflow-x: auto;
      }
      .thread-breadcrumb::-webkit-scrollbar {
        height: 0;
      }

      .breadcrumb-item {
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        white-space: nowrap;
        padding: 2px 6px;
        border-radius: 4px;
        transition: all 0.15s;
      }
      .breadcrumb-item:hover {
        color: hsl(var(--primary));
        background: hsl(var(--primary) / 0.1);
      }
      .breadcrumb-item.current {
        color: hsl(var(--foreground));
        font-weight: 500;
        background: hsl(var(--muted) / 0.5);
        cursor: default;
      }

      .breadcrumb-sep {
        color: hsl(var(--muted-foreground) / 0.4);
        font-size: 10px;
      }

      .breadcrumb-ellipsis {
        color: hsl(var(--muted-foreground) / 0.6);
        padding: 2px 4px;
        cursor: pointer;
      }
      .breadcrumb-ellipsis:hover {
        color: hsl(var(--primary));
      }

      .thread-content {
        flex: 1;
        overflow-y: auto;
        padding: 16px;
      }

      /* Resize handle */
      .resize-handle {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        cursor: ew-resize;
        background: transparent;
        transition: background 0.15s;
      }
      .resize-handle:hover {
        background: hsl(var(--primary) / 0.3);
      }

      /* ========================================
         11. QUICK SWITCHER
         ======================================== */
      .quick-switcher {
        width: 600px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 16px;
        box-shadow:
          0 24px 48px hsl(var(--foreground) / 0.2),
          0 0 0 1px hsl(var(--foreground) / 0.05);
        overflow: hidden;
      }

      .quick-switcher-input-wrapper {
        padding: 16px;
        border-bottom: 1px solid hsl(var(--border));
      }

      .quick-switcher-input {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid hsl(var(--border));
        border-radius: 10px;
        background: hsl(var(--background));
        font-size: 15px;
        font-family: inherit;
        color: hsl(var(--foreground));
        outline: none;
        transition: all 0.15s;
      }
      .quick-switcher-input:focus {
        border-color: hsl(var(--primary));
        box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
      }
      .quick-switcher-input::placeholder {
        color: hsl(var(--muted-foreground));
      }

      .quick-switcher-results {
        max-height: 400px;
        overflow-y: auto;
        padding: 8px;
      }

      .quick-switcher-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.1s;
      }
      .quick-switcher-item:hover,
      .quick-switcher-item.selected {
        background: hsl(var(--muted));
      }

      .quick-switcher-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        border-top: 1px solid hsl(var(--border));
        font-size: 11px;
        color: hsl(var(--muted-foreground));
      }

      .quick-switcher-hints {
        display: flex;
        gap: 16px;
      }

      .hint-key {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 20px;
        height: 20px;
        padding: 0 5px;
        background: hsl(var(--muted));
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
        font-family: monospace;
        margin-right: 4px;
      }

      /* ========================================
         12. TYPOGRAPHY SAMPLES
         ======================================== */
      .typography-samples {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .type-sample {
        padding: 12px 16px;
        background: hsl(var(--muted) / 0.3);
        border-radius: 8px;
      }

      .type-label {
        font-size: 10px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: hsl(var(--muted-foreground));
        margin-bottom: 4px;
      }

      /* ========================================
         13. MESSAGE STYLING (Clean, document-like)
         ======================================== */
      .message {
        display: flex;
        gap: 14px;
        margin-bottom: 20px;
      }

      .message-avatar {
        width: 36px;
        height: 36px;
        border-radius: 10px;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        font-weight: 600;
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }

      .message-content {
        flex: 1;
        padding-top: 2px;
      }

      .message-header {
        display: flex;
        align-items: baseline;
        gap: 8px;
        margin-bottom: 4px;
      }

      .message-author {
        font-weight: 600;
        font-size: 14px;
      }

      .message-time {
        font-size: 12px;
        color: hsl(var(--muted-foreground));
      }

      .message-text {
        font-size: 14px;
        line-height: 1.6;
      }

      .message-code {
        margin-top: 12px;
        padding: 14px;
        border-radius: 10px;
        background: hsl(var(--muted) / 0.5);
        border: 1px solid hsl(var(--border));
      }

      .message-code-title {
        font-weight: 600;
        font-size: 13px;
        margin-bottom: 8px;
      }

      .message-code-list {
        font-size: 13px;
        color: hsl(var(--muted-foreground));
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .message-code-list li {
        padding: 4px 0;
      }

      /* AI message special styling - full width with gold accent */
      .message.ai {
        background: linear-gradient(90deg, hsl(var(--primary) / 0.06) 0%, transparent 100%);
        margin-left: -24px;
        margin-right: -24px;
        padding: 16px 24px;
        border-left: 3px solid hsl(var(--primary));
      }

      .message.ai .message-avatar {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
      }

      .message.ai .message-author {
        color: hsl(var(--primary));
      }

      /* ========================================
         14. INPUT GROWTH DEMO
         ======================================== */
      .growth-demo {
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        overflow: hidden;
      }

      .growth-stream {
        height: 200px;
        min-height: 200px;
        background: hsl(var(--muted) / 0.2);
        padding: 16px;
        transition: height 0.2s ease;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
      }

      .growth-input-area {
        border-top: 1px solid hsl(var(--border));
        max-height: 380px;
        transition: max-height 0.2s ease;
      }

      /* ========================================
         DARK MODE TOGGLE
         ======================================== */
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: hsl(var(--foreground));
        z-index: 100;
        transition: all 0.15s;
      }
      .theme-toggle:hover {
        background: hsl(var(--muted));
      }

      /* ========================================
         15. TOP BAR
         ======================================== */
      .top-bar-demo {
        height: 44px;
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        display: flex;
        align-items: center;
        padding: 0 12px;
      }

      .top-left {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100px;
      }

      .top-center {
        flex: 1;
        display: flex;
        justify-content: center;
      }

      .top-right {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100px;
        justify-content: flex-end;
      }

      .top-toggle {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
      }
      .top-toggle:hover {
        background: hsl(var(--muted));
      }
      .top-toggle svg {
        width: 16px;
        height: 16px;
        color: hsl(var(--muted-foreground));
      }

      .top-labels {
        display: flex;
        gap: 2px;
      }

      .top-label {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 14px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
        position: relative;
      }
      .top-label:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .top-label.active {
        background: hsl(var(--muted));
      }

      .top-label-dot {
        width: 8px;
        height: 8px;
        border-radius: 2px;
      }
      .top-label-name {
        font-size: 12px;
        font-weight: 500;
      }

      .top-label-glow {
        position: absolute;
        bottom: 2px;
        left: 10px;
        right: 10px;
        height: 3px;
        border-radius: 2px;
        overflow: hidden;
        display: flex;
      }
      .glow-stripe {
        flex: 1;
        height: 100%;
      }

      @keyframes glow-pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      .glow-pulse {
        animation: glow-pulse 2s ease-in-out infinite;
      }

      .top-btn {
        padding: 6px 10px;
        font-size: 11px;
        border-radius: 6px;
        cursor: pointer;
        background: hsl(var(--muted) / 0.5);
        color: hsl(var(--muted-foreground));
        transition: all 0.15s ease;
      }
      .top-btn:hover {
        background: hsl(var(--muted));
      }

      /* Label colors */
      .label-auth {
        background: hsl(280 60% 55%);
      }
      .label-launch {
        background: hsl(150 60% 45%);
      }
      .label-design {
        background: hsl(30 70% 50%);
      }
      .label-hiring {
        background: hsl(200 60% 50%);
      }

      /* Activity colors */
      .activity-ai {
        background: hsl(var(--primary));
      }
      .activity-mention {
        background: hsl(350 70% 50%);
      }
      .activity-people {
        background: hsl(200 60% 50%);
      }
      .activity-quiet {
        background: hsl(var(--muted-foreground) / 0.15);
      }

      /* ========================================
         16. SIDEBAR
         ======================================== */
      .smart-sidebar {
        width: 280px;
        background: hsl(35 15% 96%);
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 600px;
      }

      .smart-sidebar-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .smart-sidebar-header {
        padding: 16px;
        border-bottom: 1px solid hsl(var(--border));
        flex-shrink: 0;
      }

      .smart-search {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: hsl(var(--background));
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        font-size: 13px;
        color: hsl(var(--muted-foreground));
      }

      .smart-controls {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 12px;
      }

      .smart-view-toggle {
        display: flex;
        gap: 4px;
        background: hsl(var(--muted));
        border-radius: 6px;
        padding: 2px;
      }

      .smart-view-btn {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s;
        color: hsl(var(--muted-foreground));
      }

      .smart-view-btn.active {
        background: hsl(var(--card));
        color: hsl(var(--primary));
      }

      .smart-filter-btn {
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 500;
        background: hsl(var(--muted));
        cursor: pointer;
        transition: all 0.15s;
        color: hsl(var(--muted-foreground));
      }

      .smart-filter-btn:hover {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }

      .smart-sidebar-body {
        flex: 1;
        display: flex;
        overflow-y: auto;
      }

      .urgency-strip {
        width: 6px;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
      }

      .urgency-segment {
        flex-shrink: 0;
        /* Height matches corresponding stream item */
        /* Color based on urgency: red, blue, gray, or gold */
      }

      .smart-sidebar-streams {
        flex: 1;
        padding: 8px;
      }

      .smart-section {
        margin-bottom: 16px;
      }

      .smart-section-label {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        border-radius: 6px;
        transition: all 0.15s;
      }

      .smart-section-label:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .smart-section-count {
        font-size: 10px;
        padding: 2px 6px;
        background: hsl(var(--muted));
        border-radius: 10px;
      }

      .smart-stream-list {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .smart-stream-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.1s;
      }

      .smart-stream-item:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .smart-stream-item.active {
        background: hsl(var(--primary) / 0.1);
      }

      .smart-stream-avatar {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        font-weight: 600;
        flex-shrink: 0;
      }

      .smart-stream-avatar.channel {
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
      }

      .smart-stream-avatar.scratchpad {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }

      .smart-stream-avatar.dm {
        background: hsl(200 70% 50% / 0.15);
        color: hsl(200 70% 50%);
        font-size: 11px;
      }

      .smart-stream-content {
        flex: 1;
        min-width: 0;
      }

      .smart-stream-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
      }

      .smart-stream-name {
        font-size: 13px;
        font-weight: 500;
        color: hsl(var(--foreground));
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .smart-stream-indicators {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .smart-activity-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        animation: pulse 2s ease-in-out infinite;
      }

      .smart-activity-dot.gold {
        background: hsl(var(--primary));
      }

      .smart-activity-dot.red {
        background: hsl(0 84% 60%);
      }

      .smart-activity-dot.blue {
        background: hsl(200 70% 50%);
      }

      .smart-unread-badge {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        font-size: 9px;
        font-weight: 600;
        padding: 2px 5px;
        border-radius: 10px;
        min-width: 16px;
        text-align: center;
      }

      .smart-stream-time {
        font-size: 10px;
        color: hsl(var(--muted-foreground));
        flex-shrink: 0;
      }

      .smart-stream-preview {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-top: 2px;
      }

      .smart-stream-preview strong {
        color: hsl(var(--foreground) / 0.8);
        font-weight: 500;
      }

      .smart-collapsed-indicator {
        font-size: 10px;
        color: hsl(var(--muted-foreground));
        text-align: center;
        padding: 8px 4px;
        font-style: italic;
      }

      /* Compact mode */
      .smart-sidebar.compact .smart-stream-item {
        padding: 6px 10px;
      }

      .smart-sidebar.compact .smart-stream-avatar {
        width: 24px;
        height: 24px;
        font-size: 11px;
      }

      .smart-sidebar.compact .smart-stream-name {
        font-size: 12px;
      }

      .smart-sidebar.compact .smart-stream-preview {
        display: none;
      }

      .smart-sidebar.compact .smart-stream-time {
        display: none;
      }

      /* ========================================
         MINIMIZED THREADS STRIP
         ======================================== */
      .minimized-strip {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: hsl(var(--card));
        border-top: 1px solid hsl(var(--border));
        border-radius: 12px 12px 0 0;
      }
      .minimized-strip-label {
        font-size: 11px;
        font-weight: 500;
        color: hsl(var(--muted-foreground));
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .minimized-thread-item {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
        font-size: 11px;
        font-weight: 600;
        transition: all 0.15s ease;
        position: relative;
      }
      .minimized-thread-item:hover {
        background: hsl(var(--primary) / 0.2);
        color: hsl(var(--primary));
      }
      .minimized-thread-item.has-activity::after {
        content: "";
        position: absolute;
        top: 2px;
        right: 2px;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: hsl(var(--activity-ai));
      }
      .minimized-thread-item.has-mention::after {
        background: hsl(var(--activity-mention));
      }

      /* ========================================
         AI-POWERED STATUS SECTIONS (Phase 2)
         ======================================== */
      .status-section {
        margin-bottom: 16px;
      }
      .status-section-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        font-size: 12px;
        font-weight: 600;
        color: hsl(var(--muted-foreground));
        cursor: pointer;
        border-radius: 6px;
        transition: background 0.15s ease;
      }
      .status-section-header:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .status-section-header svg {
        width: 14px;
        height: 14px;
        transition: transform 0.2s ease;
      }
      .status-section.collapsed .status-section-header svg {
        transform: rotate(-90deg);
      }
      .status-section-count {
        margin-left: auto;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 600;
      }
      .status-section.needs-attention .status-section-count {
        background: hsl(var(--activity-mention) / 0.15);
        color: hsl(var(--activity-mention));
      }
      .status-section.active .status-section-count {
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
      }
      .status-section.quiet .status-section-count {
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
      }
      .status-section-items {
        padding: 4px 0 4px 20px;
      }
      .status-section.collapsed .status-section-items {
        display: none;
      }
      .status-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 13px;
        transition: background 0.15s ease;
      }
      .status-item:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .status-item-indicator {
        width: 3px;
        height: 16px;
        border-radius: 2px;
      }
      .status-item-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: hsl(var(--muted-foreground));
      }
      .status-item-name {
        flex: 1;
      }
      .status-item-reason {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
        max-width: 120px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      /* ========================================
         BREADCRUMB DROPDOWN
         ======================================== */
      .breadcrumb-dropdown-wrapper {
        position: relative;
        display: inline-block;
      }
      .breadcrumb-dropdown {
        position: absolute;
        top: calc(100% + 4px);
        left: 50%;
        transform: translateX(-50%);
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: 8px;
        box-shadow: 0 4px 12px hsl(0 0% 0% / 0.15);
        padding: 4px;
        min-width: 160px;
        z-index: 100;
      }
      .breadcrumb-dropdown-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 13px;
        color: hsl(var(--foreground));
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .breadcrumb-dropdown-item:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .breadcrumb-dropdown-item svg {
        width: 14px;
        height: 14px;
        color: hsl(var(--muted-foreground));
      }
      .breadcrumb-depth {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
        margin-left: auto;
      }

      /* ========================================
         UTILITIES
         ======================================== */
      .flex {
        display: flex;
      }
      .items-center {
        align-items: center;
      }
      .gap-2 {
        gap: 8px;
      }
      .gap-4 {
        gap: 16px;
      }
      .mt-4 {
        margin-top: 16px;
      }
      .text-sm {
        font-size: 14px;
      }
      .text-muted {
        color: hsl(var(--muted-foreground));
      }
    </style>
  </head>
  <body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()">
      <svg class="sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="5" />
        <path
          d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
        />
      </svg>
    </button>

    <div class="kitchen-sink">
      <!-- Header -->
      <header style="margin-bottom: 48px">
        <h1
          style="
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, hsl(var(--foreground)), hsl(var(--primary)));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
          "
        >
          Threa Design System
        </h1>
        <p style="font-size: 16px; color: hsl(var(--muted-foreground))">
          Kitchen Sink Reference - All approved design decisions in one place
        </p>
      </header>

      <!-- 1. Typography -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Typography</h2>
          <p class="section-subtitle">Space Grotesk - Geometric, technical, modern. Fits "AI-native" positioning.</p>
          <span class="section-ref">typography-exploration-01.html</span>
        </div>

        <div class="typography-samples">
          <div class="type-sample">
            <div class="type-label">Heading 1 - 700</div>
            <div style="font-size: 32px; font-weight: 700">The quick brown fox</div>
          </div>
          <div class="type-sample">
            <div class="type-label">Heading 2 - 600</div>
            <div style="font-size: 24px; font-weight: 600">The quick brown fox jumps</div>
          </div>
          <div class="type-sample">
            <div class="type-label">Body - 400</div>
            <div style="font-size: 14px; font-weight: 400">
              The quick brown fox jumps over the lazy dog. Pack my box with five dozen liquor jugs.
            </div>
          </div>
          <div class="type-sample">
            <div class="type-label">Medium - 500</div>
            <div style="font-size: 14px; font-weight: 500">Used for emphasis and labels</div>
          </div>
        </div>
      </section>

      <!-- 2. Top Bar Navigation -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Top Bar Navigation</h2>
          <p class="section-subtitle">
            Centered label tabs with activity glows. Sidebar toggle left, quick actions right.
          </p>
          <span class="section-ref">nav-16-full-view.html</span>
        </div>

        <div class="component-card">
          <div class="component-label">Full Top Bar</div>
          <div class="top-bar-demo">
            <div class="top-left">
              <div class="top-toggle" title="Toggle Sidebar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" />
                  <line x1="9" y1="3" x2="9" y2="21" />
                </svg>
              </div>
            </div>

            <div class="top-center">
              <div class="top-labels">
                <div class="top-label active">
                  <div class="top-label-dot label-auth"></div>
                  <span class="top-label-name">Auth Project</span>
                  <div class="top-label-glow glow-pulse">
                    <div class="glow-stripe activity-ai"></div>
                  </div>
                </div>
                <div class="top-label">
                  <div class="top-label-dot label-launch"></div>
                  <span class="top-label-name">Q1 Launch</span>
                  <div class="top-label-glow">
                    <div class="glow-stripe activity-mention"></div>
                    <div class="glow-stripe activity-ai"></div>
                  </div>
                </div>
                <div class="top-label">
                  <div class="top-label-dot label-design"></div>
                  <span class="top-label-name">Design System</span>
                  <div class="top-label-glow">
                    <div class="glow-stripe activity-people"></div>
                  </div>
                </div>
                <div class="top-label">
                  <div class="top-label-dot label-hiring"></div>
                  <span class="top-label-name text-muted-dim">Hiring</span>
                </div>
              </div>
            </div>

            <div class="top-right">
              <div class="top-btn">K</div>
            </div>
          </div>
        </div>

        <div class="component-grid mt-4">
          <div class="component-card">
            <div class="component-label">Label Tab Anatomy</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>Color dot:</strong> Label identifier (user-defined)</li>
                <li><strong>Name:</strong> Label name, muted when quiet</li>
                <li><strong>Activity glow:</strong> Pulsing stripes below tab</li>
                <li><strong>Active state:</strong> Muted background</li>
              </ul>
            </div>
          </div>
          <div class="component-card">
            <div class="component-label">Activity Glow Types</div>
            <div class="demo-container">
              <div style="display: flex; flex-direction: column; gap: 8px">
                <div style="display: flex; align-items: center; gap: 10px">
                  <div style="width: 24px; height: 4px; border-radius: 2px" class="activity-ai"></div>
                  <span style="font-size: 13px">AI activity (gold)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px">
                  <div style="width: 24px; height: 4px; border-radius: 2px" class="activity-mention"></div>
                  <span style="font-size: 13px">Mentions (red)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px">
                  <div style="width: 24px; height: 4px; border-radius: 2px" class="activity-people"></div>
                  <span style="font-size: 13px">People activity (blue)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px">
                  <div style="width: 24px; height: 4px; border-radius: 2px" class="activity-quiet"></div>
                  <span style="font-size: 13px">Quiet (muted)</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3. Sidebar -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Sidebar</h2>
          <p class="section-subtitle">
            Smart auto-sections organize streams automatically. Urgency strip shows priority at a glance. Three states:
            Collapsed (6px strip + 15px hover zone)  Preview (hover, absolute)  Pinned (click, pushes content).
            Independent resizable widths for preview and pinned states, persisted to localStorage.
          </p>
          <span class="section-ref">sidebar-organization-exploration.html, nav-16-full-view.html</span>
        </div>

        <div class="component-grid">
          <!-- Smart View Demo -->
          <div class="component-card">
            <div class="component-label">Smart View (Default)</div>
            <div class="smart-sidebar">
              <div class="smart-sidebar-content">
                <div class="smart-sidebar-header">
                  <div class="smart-search">
                    <span></span>
                    <span>Search or K</span>
                  </div>
                  <div class="smart-controls">
                    <div class="smart-view-toggle">
                      <div class="smart-view-btn active">Smart</div>
                      <div class="smart-view-btn">All</div>
                    </div>
                    <div class="smart-filter-btn">Unread: 12</div>
                  </div>
                </div>
                <div class="smart-sidebar-body">
                  <!-- Urgency strip scrolls with content -->
                  <div class="urgency-strip">
                    <div class="urgency-segment" style="height: 80px; background: hsl(0 84% 60%)"></div>
                    <div class="urgency-segment" style="height: 80px; background: hsl(38 65% 50%)"></div>
                    <div class="urgency-segment" style="height: 140px; background: hsl(200 70% 50%)"></div>
                    <div
                      class="urgency-segment"
                      style="height: 120px; background: hsl(var(--muted-foreground) / 0.2)"
                    ></div>
                    <div
                      class="urgency-segment"
                      style="height: 80px; background: hsl(var(--muted-foreground) / 0.2)"
                    ></div>
                  </div>
                  <div class="smart-sidebar-streams">
                    <!-- Important Section -->
                    <div class="smart-section">
                      <div class="smart-section-label">
                        <span> Important</span>
                        <span class="smart-section-count">4</span>
                      </div>
                      <div class="smart-stream-list">
                        <div class="smart-stream-item active">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">engineering</div>
                              <div class="smart-stream-indicators">
                                <div class="smart-activity-dot red"></div>
                                <div class="smart-unread-badge">3</div>
                              </div>
                            </div>
                            <div class="smart-stream-preview"><strong>@you:</strong> Can you review?</div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar dm">JD</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">Jane Doe</div>
                              <div class="smart-stream-indicators">
                                <div class="smart-activity-dot gold"></div>
                                <div class="smart-unread-badge">2</div>
                              </div>
                            </div>
                            <div class="smart-stream-preview">Quick question about...</div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Recent Section -->
                    <div class="smart-section">
                      <div class="smart-section-label">
                        <span> Recent</span>
                        <span class="smart-section-count">8</span>
                      </div>
                      <div class="smart-stream-list">
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar scratchpad"></div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">Q4 Planning</div>
                              <div class="smart-stream-time">2h</div>
                            </div>
                            <div class="smart-stream-preview">Working on roadmap with Ariadne...</div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">design-system</div>
                              <div class="smart-stream-time">4h</div>
                            </div>
                            <div class="smart-stream-preview">Updated the color palette...</div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar scratchpad"></div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">Meeting Notes</div>
                              <div class="smart-stream-time">6h</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Pinned Section -->
                    <div class="smart-section">
                      <div class="smart-section-label">
                        <span> Pinned</span>
                        <span class="smart-section-count">3</span>
                      </div>
                      <div class="smart-stream-list">
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-name">general</div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar scratchpad"></div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-name">Ideas</div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Everything Else -->
                    <div class="smart-section">
                      <div class="smart-section-label">
                        <span> Everything Else</span>
                        <span class="smart-section-count">47</span>
                      </div>
                      <div class="smart-collapsed-indicator">Click to expand or use search</div>
                    </div>
                  </div>
                  <!-- .smart-sidebar-streams -->
                </div>
                <!-- .smart-sidebar-body -->
              </div>
              <!-- .smart-sidebar-content -->
            </div>
            <!-- .smart-sidebar -->
          </div>
          <!-- .component-card -->

          <!-- Compact Mode -->
          <div class="component-card">
            <div class="component-label">Compact Density Mode</div>
            <div class="smart-sidebar compact">
              <div class="smart-sidebar-content">
                <div class="smart-sidebar-header">
                  <div class="smart-search">
                    <span></span>
                    <span>Search</span>
                  </div>
                  <div class="smart-controls">
                    <div class="smart-view-toggle">
                      <div class="smart-view-btn active">Smart</div>
                      <div class="smart-view-btn">All</div>
                    </div>
                  </div>
                </div>
                <div class="smart-sidebar-body">
                  <!-- Urgency strip scrolls with content -->
                  <div class="urgency-strip">
                    <div class="urgency-segment" style="height: 56px; background: hsl(0 84% 60%)"></div>
                    <div class="urgency-segment" style="height: 56px; background: hsl(38 65% 50%)"></div>
                    <div class="urgency-segment" style="height: 110px; background: hsl(200 70% 50%)"></div>
                  </div>
                  <div class="smart-sidebar-streams">
                    <div class="smart-section">
                      <div class="smart-section-label">
                        <span> Important</span>
                        <span class="smart-section-count">4</span>
                      </div>
                      <div class="smart-stream-list">
                        <div class="smart-stream-item active">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">engineering</div>
                              <div class="smart-unread-badge">3</div>
                            </div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar dm">JD</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">Jane Doe</div>
                              <div class="smart-unread-badge">2</div>
                            </div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar scratchpad"></div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">Q4 Planning</div>
                            </div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-header">
                              <div class="smart-stream-name">design-system</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="smart-section">
                      <div class="smart-section-label">
                        <span> Recent</span>
                        <span class="smart-section-count">12</span>
                      </div>
                      <div class="smart-stream-list">
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-name">frontend</div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar scratchpad"></div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-name">Ideas</div>
                          </div>
                        </div>
                        <div class="smart-stream-item">
                          <div class="smart-stream-avatar channel">#</div>
                          <div class="smart-stream-content">
                            <div class="smart-stream-name">backend</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- .smart-sidebar-streams -->
                </div>
                <!-- .smart-sidebar-body -->
              </div>
              <!-- .smart-sidebar-content -->
            </div>
            <!-- .smart-sidebar -->
          </div>
          <!-- .component-card -->

          <!-- Urgency Strip Explained -->
          <div class="component-card">
            <div class="component-label">Urgency Strip</div>
            <div class="demo-container">
              <p style="font-size: 13px; margin-bottom: 12px">
                The 6px strip on the left <strong>scrolls with the sidebar content</strong>. Each stream item has a
                corresponding segment showing its urgency:
              </p>
              <ul style="font-size: 12px; line-height: 1.8; padding-left: 20px">
                <li><strong style="color: hsl(0 84% 60%)">Red</strong> - Mentions (especially many) - most urgent</li>
                <li>
                  <strong style="color: hsl(200 70% 50%)">Blue</strong> - Activity in threads you're in - medium
                  priority
                </li>
                <li>
                  <strong style="color: hsl(var(--muted-foreground))">Gray</strong> - Quiet streams - low priority
                </li>
                <li><strong style="color: hsl(var(--primary))">Gold</strong> (future) - AI activity indicator</li>
              </ul>
              <p style="font-size: 12px; margin-top: 12px; color: hsl(var(--muted-foreground))">
                <strong>Implementation:</strong> The strip is positioned inside the scrollable area
                (`.smart-sidebar-body`), not as a fixed sibling. Each stream item's height determines its strip segment
                height. As you scroll, the strip scrolls with the content, maintaining the visual connection between
                strip color and stream item.
              </p>
            </div>
          </div>

          <!-- Collapsible States -->
          <div class="component-card">
            <div class="component-label">Collapsible States</div>
            <div class="demo-container">
              <div style="font-size: 13px; line-height: 1.9">
                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Three States:</p>
                <ul style="padding-left: 20px; margin-bottom: 16px">
                  <li>
                    <strong>Collapsed (default):</strong> 6px urgency strip only. Content hidden with opacity: 0 and
                    pointer-events: none.
                  </li>
                  <li>
                    <strong>Preview (hover):</strong> Expands to saved width (default 260px), positioned absolutely
                    (doesn't push content). Has box-shadow for depth. Triggered by hover on urgency strip, 15px hover
                    margin, or sidebar itself. Independently resizable and persisted.
                  </li>
                  <li>
                    <strong>Pinned (click):</strong> Expands to saved width (default 280px), positioned normally (pushes
                    main content). Click anywhere on sidebar to pin. No hover margin when pinned. Independently
                    resizable and persisted.
                  </li>
                </ul>

                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Hover Margin:</p>
                <ul style="padding-left: 20px; margin-bottom: 16px">
                  <li>
                    <strong>15px invisible zone</strong> adjacent to collapsed sidebar. Reduced from 30px to prevent
                    accidental triggers while maintaining discoverability.
                  </li>
                  <li><strong>Triggers preview</strong> when mouse enters (same as hovering color strip itself).</li>
                  <li><strong>Only present in collapsed state.</strong> Disappears when sidebar is pinned.</li>
                  <li>
                    <strong>Position:</strong> `position: absolute; left: 100%` (to the right of the sidebar wrapper).
                  </li>
                </ul>

                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Resize & Persistence:</p>
                <ul style="padding-left: 20px; margin-bottom: 16px">
                  <li>
                    <strong>Independent widths:</strong> Preview (hover) and pinned states have separate resizable
                    widths.
                  </li>
                  <li><strong>Resize handle:</strong> 4px draggable area on the right edge when sidebar is visible.</li>
                  <li><strong>Width constraints:</strong> Min 200px, max 600px for both states.</li>
                  <li>
                    <strong>Persistence:</strong> Widths saved to localStorage (`sidebar.width.preview` and
                    `sidebar.width.pinned`).
                  </li>
                  <li><strong>Defaults:</strong> Preview: 260px, Pinned: 280px.</li>
                </ul>

                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Interaction Details:</p>
                <ul style="padding-left: 20px">
                  <li>
                    <strong>150ms hide delay:</strong> Preview doesn't immediately disappear on mouse leave - prevents
                    flickering when moving between hover zones.
                  </li>
                  <li>
                    <strong>Z-index layering:</strong> Preview (z-index: 50), hover margin (z-index: 40), ensures proper
                    stacking.
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- State Transitions Diagram -->
          <div class="component-card" style="grid-column: span 2">
            <div class="component-label">State Transitions</div>
            <div class="demo-container">
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 16px;
                  font-size: 12px;
                  padding: 16px 0;
                  flex-wrap: wrap;
                  justify-content: center;
                "
              >
                <!-- Collapsed State -->
                <div style="text-align: center">
                  <div
                    style="
                      width: 6px;
                      height: 80px;
                      background: linear-gradient(to bottom, hsl(var(--primary)), hsl(var(--primary) / 0.6));
                      border-radius: 3px;
                      margin: 0 auto 8px;
                    "
                  ></div>
                  <div style="font-weight: 600">Collapsed</div>
                  <div style="color: hsl(var(--muted-foreground)); margin-top: 4px">6px strip</div>
                  <div style="color: hsl(var(--muted-foreground))">+ 15px hover zone</div>
                </div>

                <!-- Arrow -->
                <div style="color: hsl(var(--muted-foreground)); font-size: 18px">
                  
                  <div style="font-size: 11px; margin-top: 4px">hover</div>
                </div>

                <!-- Preview State -->
                <div style="text-align: center">
                  <div
                    style="
                      width: 80px;
                      height: 80px;
                      background: hsl(var(--card));
                      border: 1px solid hsl(var(--border));
                      border-left: 3px solid hsl(var(--primary));
                      border-radius: 8px;
                      margin: 0 auto 8px;
                      box-shadow: 4px 0 12px hsl(var(--foreground) / 0.1);
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      font-size: 10px;
                      color: hsl(var(--muted-foreground));
                    "
                  >
                    260px
                  </div>
                  <div style="font-weight: 600">Preview</div>
                  <div style="color: hsl(var(--muted-foreground)); margin-top: 4px">Absolute position</div>
                  <div style="color: hsl(var(--muted-foreground))">+ box shadow</div>
                </div>

                <!-- Arrow -->
                <div style="color: hsl(var(--muted-foreground)); font-size: 18px">
                  
                  <div style="font-size: 11px; margin-top: 4px">click</div>
                </div>

                <!-- Pinned State -->
                <div style="text-align: center">
                  <div
                    style="
                      width: 80px;
                      height: 80px;
                      background: hsl(var(--card));
                      border: 1px solid hsl(var(--border));
                      border-left: 3px solid hsl(var(--primary));
                      border-radius: 8px;
                      margin: 0 auto 8px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      font-size: 10px;
                      color: hsl(var(--muted-foreground));
                    "
                  >
                    260px
                  </div>
                  <div style="font-weight: 600">Pinned</div>
                  <div style="color: hsl(var(--muted-foreground)); margin-top: 4px">Normal flow</div>
                  <div style="color: hsl(var(--muted-foreground))">Pushes content</div>
                </div>

                <!-- Arrow back -->
                <div style="color: hsl(var(--muted-foreground)); font-size: 18px">
                  
                  <div style="font-size: 11px; margin-top: 4px">click again</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Implementation Notes -->
          <div class="component-card" style="grid-column: span 2">
            <div class="component-label">Implementation Notes</div>
            <div class="demo-container">
              <div style="font-size: 13px; line-height: 1.9">
                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Structure:</p>
                <ul style="padding-left: 20px; margin-bottom: 16px">
                  <li>
                    <strong>Urgency strip scrolls with content:</strong> Positioned inside `.smart-sidebar-body`, not as
                    a fixed sibling. Each stream item has a corresponding `.urgency-segment` with height matching the
                    item.
                  </li>
                  <li>
                    <strong>Smart Auto-Sections:</strong> Automatic organization without requiring labels (Important,
                    Recent, Pinned, Everything Else).
                  </li>
                  <li><strong>View modes:</strong> Smart (auto-organized) vs All (type-based inventory).</li>
                  <li>
                    <strong>Density modes:</strong> Comfortable (with previews) vs Compact (names only, fits 2x more).
                  </li>
                  <li><strong>Quick filters:</strong> Unread, Active, Pinned states.</li>
                </ul>

                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Key CSS Patterns:</p>

                <div
                  style="
                    background: hsl(var(--muted) / 0.3);
                    padding: 12px;
                    border-radius: 6px;
                    font-family: &quot;SF Mono&quot;, &quot;Fira Code&quot;, monospace;
                    font-size: 12px;
                    margin-bottom: 12px;
                  "
                >
                  <div style="color: hsl(var(--muted-foreground)); margin-bottom: 8px">
                    /* Sidebar body with scrolling strip */
                  </div>
                  <div>.smart-sidebar-body {</div>
                  <div style="padding-left: 16px">display: flex;</div>
                  <div style="padding-left: 16px">overflow-y: auto;</div>
                  <div>}</div>
                  <div>.urgency-strip {</div>
                  <div style="padding-left: 16px">width: 6px;</div>
                  <div style="padding-left: 16px">flex-shrink: 0;</div>
                  <div style="padding-left: 16px">display: flex;</div>
                  <div style="padding-left: 16px">flex-direction: column;</div>
                  <div>}</div>
                  <div>.urgency-segment {</div>
                  <div style="padding-left: 16px">flex-shrink: 0;</div>
                  <div style="padding-left: 16px">/* Height matches stream item */</div>
                  <div style="padding-left: 16px">/* Color: red, blue, gray, gold */</div>
                  <div>}</div>
                  <div>.smart-sidebar-streams {</div>
                  <div style="padding-left: 16px">flex: 1;</div>
                  <div style="padding-left: 16px">padding: 8px;</div>
                  <div>}</div>
                  <br />
                  <div style="color: hsl(var(--muted-foreground)); margin-bottom: 8px">/* Collapsed state */</div>
                  <div>.sidebar-collapsed .sidebar {</div>
                  <div style="padding-left: 16px">width: 6px;</div>
                  <div>}</div>
                  <div>.sidebar-collapsed .sidebar:not(.preview) .smart-sidebar-content {</div>
                  <div style="padding-left: 16px">opacity: 0;</div>
                  <div style="padding-left: 16px">pointer-events: none;</div>
                  <div>}</div>
                  <br />
                  <div style="color: hsl(var(--muted-foreground)); margin-bottom: 8px">/* Preview state */</div>
                  <div>.sidebar.preview {</div>
                  <div style="padding-left: 16px">
                    width: var(--sidebar-width-preview, 260px); /* Dynamic, from localStorage */
                  </div>
                  <div style="padding-left: 16px">position: absolute;</div>
                  <div style="padding-left: 16px">z-index: 50;</div>
                  <div style="padding-left: 16px">box-shadow: 4px 0 24px hsl(var(--foreground) / 0.1);</div>
                  <div>}</div>
                  <div>.sidebar.pinned {</div>
                  <div style="padding-left: 16px">
                    width: var(--sidebar-width-pinned, 280px); /* Dynamic, from localStorage */
                  </div>
                  <div>}</div>
                  <br />
                  <div style="color: hsl(var(--muted-foreground)); margin-bottom: 8px">/* Hover margin */</div>
                  <div>.hover-margin {</div>
                  <div style="padding-left: 16px">position: absolute;</div>
                  <div style="padding-left: 16px">left: 100%;</div>
                  <div style="padding-left: 16px">width: 15px; /* Reduced from 30px */</div>
                  <div style="padding-left: 16px">z-index: 40;</div>
                  <div>}</div>
                  <div>.sidebar-open .hover-margin {</div>
                  <div style="padding-left: 16px">display: none;</div>
                  <div>}</div>
                  <br />
                  <div style="color: hsl(var(--muted-foreground)); margin-bottom: 8px">/* Resize handle */</div>
                  <div>.sidebar-resize-handle {</div>
                  <div style="padding-left: 16px">position: absolute;</div>
                  <div style="padding-left: 16px">right: 0;</div>
                  <div style="padding-left: 16px">top: 0;</div>
                  <div style="padding-left: 16px">bottom: 0;</div>
                  <div style="padding-left: 16px">width: 4px;</div>
                  <div style="padding-left: 16px">cursor: ew-resize;</div>
                  <div style="padding-left: 16px">z-index: 60;</div>
                  <div>}</div>
                  <div>.sidebar-resize-handle:hover {</div>
                  <div style="padding-left: 16px">background: hsl(var(--primary) / 0.2);</div>
                  <div>}</div>
                </div>

                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">JavaScript Behavior:</p>

                <ul style="padding-left: 20px; margin-bottom: 16px">
                  <li>
                    <strong>showPreview():</strong> Add `.preview` class to sidebar. Apply saved width from localStorage
                    (`sidebar.width.preview`, default 260px).
                  </li>
                  <li>
                    <strong>hidePreview():</strong> Remove `.preview` class after 150ms delay (check isHovering flag).
                  </li>
                  <li>
                    <strong>toggleSidebar():</strong> Toggle between collapsed and pinned. Apply saved width from
                    localStorage (`sidebar.width.pinned`, default 280px). Remove preview class when pinning.
                  </li>
                  <li>
                    <strong>handleResize():</strong> On mousedown on resize handle, track mousemove to update width
                    (constrained 200-600px). Save to localStorage on mouseup. Update different key based on state
                    (preview vs pinned).
                  </li>
                  <li>
                    <strong>Event listeners:</strong> Attach to hover-margin, urgency-strip, and sidebar itself. All
                    trigger showPreview on mouseenter. Resize handle has mousedown listener.
                  </li>
                </ul>

                <p style="font-weight: 600; margin-bottom: 12px; color: hsl(var(--primary))">Accessibility:</p>

                <ul style="padding-left: 20px">
                  <li><strong>Keyboard navigation:</strong> Pin/unpin with spacebar or enter when focused.</li>
                  <li>
                    <strong>Screen readers:</strong> Announce state changes ("sidebar expanded", "sidebar collapsed").
                  </li>
                  <li>
                    <strong>Reduced motion:</strong> Skip transitions if prefers-reduced-motion is enabled (instant
                    state changes).
                  </li>
                  <li>
                    <strong>Focus management:</strong> When pinned, first stream item should receive focus for keyboard
                    navigation.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- 4. Message Input - Premium Glow -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Message Input - Premium Glow</h2>
          <p class="section-subtitle">
            Subtle gold glow on focus. Attachment bar above, text input below, send button right.
          </p>
          <span class="section-ref">input-exploration-01.html - Design #7</span>
        </div>

        <div class="component-grid">
          <div class="component-card" style="grid-column: span 2">
            <div class="component-label">Full Width (Stream View)</div>
            <div class="premium-input-container">
              <div class="premium-input-box">
                <!-- Formatting Toolbar - Always Visible -->
                <div class="formatting-toolbar">
                  <button class="toolbar-btn" title="Bold">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"
                        stroke="currentColor"
                        stroke-width="2"
                        fill="none"
                      />
                    </svg>
                  </button>
                  <button class="toolbar-btn" title="Italic">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="19" y1="4" x2="10" y2="4" />
                      <line x1="14" y1="20" x2="5" y2="20" />
                      <line x1="15" y1="4" x2="9" y2="20" />
                    </svg>
                  </button>
                  <button class="toolbar-btn" title="Strikethrough">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M16 4H9a3 3 0 0 0 0 6h6a3 3 0 0 1 0 6H8" />
                      <line x1="4" y1="12" x2="20" y2="12" />
                    </svg>
                  </button>
                  <button class="toolbar-btn" title="Code">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="16,18 22,12 16,6" />
                      <polyline points="8,6 2,12 8,18" />
                    </svg>
                  </button>
                  <div class="toolbar-divider"></div>
                  <button class="toolbar-btn" title="Link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                    </svg>
                  </button>
                  <button class="toolbar-btn" title="Bullet List">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="8" y1="6" x2="21" y2="6" />
                      <line x1="8" y1="12" x2="21" y2="12" />
                      <line x1="8" y1="18" x2="21" y2="18" />
                      <circle cx="4" cy="6" r="1" fill="currentColor" />
                      <circle cx="4" cy="12" r="1" fill="currentColor" />
                      <circle cx="4" cy="18" r="1" fill="currentColor" />
                    </svg>
                  </button>
                  <div class="toolbar-divider"></div>
                  <button class="toolbar-btn" title="Emoji"></button>
                  <button class="toolbar-btn" title="Mention">@</button>
                  <button class="toolbar-btn" title="Slash Command">/</button>
                  <button class="toolbar-btn" title="Attach File">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path
                        d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
                      />
                    </svg>
                  </button>
                </div>

                <!-- Attachment Bar -->
                <div class="attachment-bar">
                  <div class="attachment-chip uploaded">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                      <circle cx="8.5" cy="8.5" r="1.5" />
                      <polyline points="21 15 16 10 5 21" />
                    </svg>
                    <span>screenshot.png</span>
                    <span class="remove-btn"></span>
                  </div>
                  <div class="attachment-chip uploading">
                    <svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 12a9 9 0 1 1-6.219-8.56" />
                    </svg>
                    <span>report.pdf</span>
                  </div>
                </div>

                <!-- Input Row -->
                <div class="input-row">
                  <button class="expand-btn" title="Open Document Editor">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="15 3 21 3 21 9" />
                      <polyline points="9 21 3 21 3 15" />
                      <line x1="21" y1="3" x2="14" y2="10" />
                      <line x1="3" y1="21" x2="10" y2="14" />
                    </svg>
                  </button>
                  <div class="text-input-wrapper">
                    <div
                      class="text-input rendered-content"
                      style="
                        min-height: 40px;
                        padding: 8px 12px;
                        display: flex;
                        align-items: center;
                        flex-wrap: wrap;
                        gap: 4px;
                      "
                    >
                      <span>Hey </span>
                      <span class="inline-mention user">@Alex</span>
                      <span>, I pushed the fix to </span>
                      <span class="inline-mention channel">#auth-dev</span>
                      <span>  check </span>
                      <span class="inline-ref" style="display: inline-flex">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                          <polyline points="14 2 14 8 20 8" />
                        </svg>
                        diff.patch
                      </span>
                    </div>
                  </div>
                  <button class="send-btn" title="Send Message">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="22" y1="2" x2="11" y2="13" />
                      <polygon points="22 2 15 22 11 13 2 9 22 2" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Narrow (Thread View)</div>
            <div class="premium-input-container" style="max-width: 320px; margin: 0 auto">
              <div class="premium-input-box">
                <div class="formatting-toolbar">
                  <button class="toolbar-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"
                        stroke="currentColor"
                        stroke-width="2"
                        fill="none"
                      />
                    </svg>
                  </button>
                  <button class="toolbar-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="19" y1="4" x2="10" y2="4" />
                      <line x1="14" y1="20" x2="5" y2="20" />
                      <line x1="15" y1="4" x2="9" y2="20" />
                    </svg>
                  </button>
                  <button class="toolbar-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="16,18 22,12 16,6" />
                      <polyline points="8,6 2,12 8,18" />
                    </svg>
                  </button>
                  <div class="toolbar-divider"></div>
                  <button class="toolbar-btn"></button>
                  <button class="toolbar-btn">@</button>
                </div>
                <div class="input-row">
                  <div class="text-input-wrapper">
                    <div
                      class="text-input rendered-content"
                      style="
                        min-height: 40px;
                        padding: 8px 12px;
                        display: flex;
                        align-items: center;
                        flex-wrap: wrap;
                        gap: 4px;
                      "
                    >
                      <span>Try using </span>
                      <code style="font-size: 12px">mutex.Lock()</code>
                      <span> </span>
                    </div>
                  </div>
                  <button class="send-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="22" y1="2" x2="11" y2="13" />
                      <polygon points="22 2 15 22 11 13 2 9 22 2" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 5. Inline References -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Inline References</h2>
          <p class="section-subtitle">Claude Code inspired. Removing inline ref does NOT remove attachment from bar.</p>
          <span class="section-ref">input-exploration-02-interactions.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <div class="component-label">Inline Reference Chips</div>
            <div style="font-size: 14px; line-height: 2">
              <p>
                Here's the analysis of the data from
                <span class="inline-ref">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                  </svg>
                  report.xlsx </span
                >. As you can see in
                <span class="inline-ref">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <polyline points="21 15 16 10 5 21" />
                  </svg>
                  Image #1 </span
                >, the trend is positive.
              </p>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Attachment States</div>
            <div class="flex gap-4" style="flex-wrap: wrap">
              <div class="attachment-chip uploaded">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <polyline points="21 15 16 10 5 21" />
                </svg>
                <span>photo.jpg</span>
                <span class="remove-btn"></span>
              </div>
              <div class="attachment-chip uploading">
                <svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 12a9 9 0 1 1-6.219-8.56" />
                </svg>
                <span>data.csv</span>
              </div>
            </div>
            <p class="text-sm text-muted mt-4">
              <strong>Uploaded:</strong> Primary accent (gold)<br />
              <strong>Uploading:</strong> Dashed mono with spinner
            </p>
          </div>
        </div>
      </section>

      <!-- 6. Emoji Picker -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Emoji Picker</h2>
          <p class="section-subtitle">Standard with categories for reactions. Inline uses typed text as search.</p>
          <span class="section-ref">input-exploration-02-interactions.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <div class="component-label">Standard with Categories (Reactions)</div>
            <div class="emoji-picker">
              <div class="emoji-picker-header">
                <input type="text" class="emoji-search" placeholder="Search emojis..." />
              </div>
              <div class="emoji-categories">
                <button class="emoji-category-btn active"></button>
                <button class="emoji-category-btn"></button>
                <button class="emoji-category-btn"></button>
                <button class="emoji-category-btn"></button>
                <button class="emoji-category-btn"></button>
                <button class="emoji-category-btn"></button>
                <button class="emoji-category-btn"></button>
                <button class="emoji-category-btn"></button>
              </div>
              <div class="emoji-grid">
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
                <div class="emoji-item"></div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Inline Search (no top bar)</div>
            <div class="demo-container">
              <p style="font-size: 13px; color: hsl(var(--muted-foreground)); margin-bottom: 12px">
                User types <code style="background: hsl(var(--muted)); padding: 2px 6px; border-radius: 4px">:smi</code>
              </p>
              <div class="emoji-inline-search">
                <div style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-bottom: 8px">
                  Showing results for "smi"
                </div>
                <div class="emoji-grid" style="grid-template-columns: repeat(6, 1fr)">
                  <div class="emoji-item"></div>
                  <div class="emoji-item"></div>
                  <div class="emoji-item"></div>
                  <div class="emoji-item"></div>
                  <div class="emoji-item"></div>
                  <div class="emoji-item"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 7. Slash Commands -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Slash Commands</h2>
          <p class="section-subtitle">
            Floating pill style. Sort by relevance (best match top), NOT grouped by type. Icons/colors indicate type.
          </p>
          <span class="section-ref">input-exploration-02-interactions.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <div class="component-label">Floating Pill - By Relevance</div>
            <div class="slash-popover">
              <div class="slash-item selected">
                <div class="slash-icon frontend">B</div>
                <div class="slash-content">
                  <div class="slash-name">/bold</div>
                  <div class="slash-desc">Make text bold</div>
                </div>
                <span class="slash-shortcut">B</span>
              </div>
              <div class="slash-item">
                <div class="slash-icon ai"></div>
                <div class="slash-content">
                  <div class="slash-name">/brainstorm</div>
                  <div class="slash-desc">Get AI suggestions</div>
                </div>
              </div>
              <div class="slash-item">
                <div class="slash-icon backend"></div>
                <div class="slash-content">
                  <div class="slash-name">/bug</div>
                  <div class="slash-desc">Report a bug</div>
                </div>
              </div>
              <div class="slash-item">
                <div class="slash-icon frontend"></div>
                <div class="slash-content">
                  <div class="slash-name">/bullet</div>
                  <div class="slash-desc">Create bullet list</div>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Command Type Indicators</div>
            <div class="demo-container">
              <div class="flex gap-4" style="flex-wrap: wrap">
                <div class="flex items-center gap-2">
                  <div class="slash-icon backend"></div>
                  <span class="text-sm">Backend action</span>
                </div>
                <div class="flex items-center gap-2">
                  <div class="slash-icon frontend">B</div>
                  <span class="text-sm">Frontend formatting</span>
                </div>
                <div class="flex items-center gap-2">
                  <div class="slash-icon ai"></div>
                  <span class="text-sm">AI-powered</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 8. Mentions -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Mentions</h2>
          <p class="section-subtitle">
            Floating compact. Sort by relevance, NOT by type. @ for users/personas, # for channels.
          </p>
          <span class="section-ref">input-exploration-02-interactions.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <div class="component-label">@mention Popover - Floating Compact</div>
            <div class="mention-popover">
              <div class="mention-item selected">
                <div class="mention-avatar ai">A</div>
                <div class="mention-info">
                  <div class="mention-name">Ariadne</div>
                  <div class="mention-detail">AI Assistant</div>
                </div>
              </div>
              <div class="mention-item">
                <div class="mention-avatar user">AL</div>
                <div class="mention-info">
                  <div class="mention-name">Alex Lee</div>
                  <div class="mention-detail">alex@threa.io</div>
                </div>
              </div>
              <div class="mention-item">
                <div class="mention-avatar user">AM</div>
                <div class="mention-info">
                  <div class="mention-name">Amara</div>
                  <div class="mention-detail">amara@threa.io</div>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">#channel Popover</div>
            <div class="mention-popover">
              <div class="mention-item selected">
                <div class="mention-avatar channel">#</div>
                <div class="mention-info">
                  <div class="mention-name">auth-dev</div>
                  <div class="mention-detail">12 members</div>
                </div>
              </div>
              <div class="mention-item">
                <div class="mention-avatar channel">#</div>
                <div class="mention-info">
                  <div class="mention-name">announcements</div>
                  <div class="mention-detail">45 members</div>
                </div>
              </div>
              <div class="mention-item">
                <div class="mention-avatar channel">#</div>
                <div class="mention-info">
                  <div class="mention-name">api-design</div>
                  <div class="mention-detail">8 members</div>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Inline Mention Styles</div>
            <div style="font-size: 14px; line-height: 2">
              <p>
                Hey
                <span class="inline-mention user">@Alex Lee</span>, did you see
                <span class="inline-mention ai">@Ariadne</span>'s analysis? I posted it in
                <span class="inline-mention channel">#auth-dev</span>.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- 9. Document Editor Modal -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Document Editor Modal</h2>
          <p class="section-subtitle">
            Triggered by expand button (). Explicit "Send Message" button. For announcements, long-form content.
          </p>
          <span class="section-ref">input-exploration-03-growth.html</span>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto">
          <div class="component-label">Modal Layout</div>
          <div class="doc-editor-modal">
            <div class="doc-editor-header">
              <span class="doc-editor-title">Compose Message</span>
              <button class="doc-editor-close">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18" />
                  <line x1="6" y1="6" x2="18" y2="18" />
                </svg>
              </button>
            </div>
            <div class="doc-editor-toolbar">
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"
                    stroke="currentColor"
                    stroke-width="2"
                    fill="none"
                  />
                </svg>
              </button>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="19" y1="4" x2="10" y2="4" />
                  <line x1="14" y1="20" x2="5" y2="20" />
                  <line x1="15" y1="4" x2="9" y2="20" />
                </svg>
              </button>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 4H9a3 3 0 0 0 0 6h6a3 3 0 0 1 0 6H8" />
                  <line x1="4" y1="12" x2="20" y2="12" />
                </svg>
              </button>
              <div class="toolbar-divider"></div>
              <button class="toolbar-btn">H1</button>
              <button class="toolbar-btn">H2</button>
              <button class="toolbar-btn">H3</button>
              <div class="toolbar-divider"></div>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="8" y1="6" x2="21" y2="6" />
                  <line x1="8" y1="12" x2="21" y2="12" />
                  <line x1="8" y1="18" x2="21" y2="18" />
                  <circle cx="4" cy="6" r="1" fill="currentColor" />
                  <circle cx="4" cy="12" r="1" fill="currentColor" />
                  <circle cx="4" cy="18" r="1" fill="currentColor" />
                </svg>
              </button>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="10" y1="6" x2="21" y2="6" />
                  <line x1="10" y1="12" x2="21" y2="12" />
                  <line x1="10" y1="18" x2="21" y2="18" />
                  <path d="M4 6h1v4" />
                  <path d="M4 10h2" />
                  <path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1" />
                </svg>
              </button>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="3" y1="10" x2="21" y2="10" />
                  <path d="M8 3l4 7 4-7" />
                  <path d="M4 17h16" />
                </svg>
              </button>
              <div class="toolbar-divider"></div>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                </svg>
              </button>
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path
                    d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
                  />
                </svg>
              </button>
              <button class="toolbar-btn">@</button>
              <button class="toolbar-btn"></button>
            </div>
            <div class="doc-editor-body">
              <!-- Attachment Drop Zone -->
              <div
                style="
                  border: 2px dashed hsl(var(--border));
                  border-radius: 8px;
                  padding: 16px;
                  margin-bottom: 16px;
                  display: flex;
                  align-items: center;
                  gap: 12px;
                  background: hsl(var(--muted) / 0.3);
                "
              >
                <div style="display: flex; gap: 8px; flex-wrap: wrap; flex: 1">
                  <div class="attachment-chip uploaded">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                      <circle cx="8.5" cy="8.5" r="1.5" />
                      <polyline points="21 15 16 10 5 21" />
                    </svg>
                    <span>screenshot.png</span>
                    <span class="remove-btn"></span>
                  </div>
                  <div class="attachment-chip uploaded">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                      <polyline points="14 2 14 8 20 8" />
                    </svg>
                    <span>spec.pdf</span>
                    <span class="remove-btn"></span>
                  </div>
                </div>
                <button class="btn btn-ghost" style="font-size: 12px; padding: 6px 10px">
                  <svg
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    style="margin-right: 4px"
                  >
                    <path
                      d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
                    />
                  </svg>
                  Add files
                </button>
              </div>

              <!-- Rich Text Content (TipTap rendered) -->
              <div class="rendered-content" style="min-height: 200px; outline: none" contenteditable="true">
                <h2 style="font-size: 20px; font-weight: 600; margin: 0 0 16px 0">Weekly Update</h2>
                <p>Hey team! Here's a quick summary of what we accomplished this week:</p>

                <h3 style="font-size: 16px; font-weight: 600; margin: 20px 0 12px 0">Completed</h3>
                <ul style="margin: 0; padding-left: 24px">
                  <li>Finished the authentication refactor</li>
                  <li>Deployed new API endpoints</li>
                  <li>Updated documentation</li>
                </ul>

                <h3 style="font-size: 16px; font-weight: 600; margin: 20px 0 12px 0">Next Week</h3>
                <ul style="margin: 0; padding-left: 24px">
                  <li>Start on the notification system</li>
                  <li>Review PRs from <span class="inline-mention user">@Alex</span></li>
                </ul>

                <p style="margin-top: 16px">
                  See
                  <span class="inline-ref">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                      <circle cx="8.5" cy="8.5" r="1.5" />
                      <polyline points="21 15 16 10 5 21" />
                    </svg>
                    Image #1
                  </span>
                  for the new dashboard design. Let me know if you have any questions!
                </p>
              </div>
            </div>
            <div class="doc-editor-footer">
              <div class="flex items-center gap-2">
                <button class="btn btn-ghost">Preview</button>
                <button class="btn btn-ghost">Save Draft</button>
              </div>
              <div class="doc-editor-actions">
                <button class="btn btn-outline">Schedule</button>
                <button class="btn btn-primary">Send Message</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 10. Input Growth Behavior -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Input Growth Behavior</h2>
          <p class="section-subtitle">
            Push strategy: Stream shrinks, input grows upward. Text input: 40px min  200px max. Attachment bar: 0px 
            120px max.
          </p>
          <span class="section-ref">input-exploration-03-growth.html</span>
        </div>

        <div class="component-card" style="max-width: 600px; margin: 0 auto">
          <div class="component-label">Stream + Input Growth Demo</div>
          <div class="growth-demo">
            <div class="growth-stream">
              <div class="message" style="margin-bottom: 12px">
                <div class="message-avatar" style="width: 28px; height: 28px; font-size: 11px">K</div>
                <div class="message-content">
                  <div class="message-text" style="font-size: 13px">What's the status on the auth refactor?</div>
                </div>
              </div>
              <div class="message ai" style="margin: 0 -16px; padding: 12px 16px">
                <div class="message-avatar" style="width: 28px; height: 28px; font-size: 11px">A</div>
                <div class="message-content">
                  <div class="message-text" style="font-size: 13px">
                    The refactor is 80% complete. We've migrated the token refresh logic and are now working on the
                    session management.
                  </div>
                </div>
              </div>
            </div>
            <div class="growth-input-area">
              <div class="premium-input-box" style="border-radius: 0">
                <div class="formatting-toolbar">
                  <button class="toolbar-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"
                        stroke="currentColor"
                        stroke-width="2"
                        fill="none"
                      />
                    </svg>
                  </button>
                  <button class="toolbar-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="19" y1="4" x2="10" y2="4" />
                      <line x1="14" y1="20" x2="5" y2="20" />
                      <line x1="15" y1="4" x2="9" y2="20" />
                    </svg>
                  </button>
                  <button class="toolbar-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="16,18 22,12 16,6" />
                      <polyline points="8,6 2,12 8,18" />
                    </svg>
                  </button>
                  <div class="toolbar-divider"></div>
                  <button class="toolbar-btn"></button>
                  <button class="toolbar-btn">@</button>
                  <button class="toolbar-btn">/</button>
                </div>
                <div class="input-row">
                  <button class="expand-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="15 3 21 3 21 9" />
                      <polyline points="9 21 3 21 3 15" />
                      <line x1="21" y1="3" x2="14" y2="10" />
                      <line x1="3" y1="21" x2="10" y2="14" />
                    </svg>
                  </button>
                  <div class="text-input-wrapper">
                    <div class="text-input rendered-content" style="min-height: 40px; padding: 8px 12px">
                      <span>Thanks </span>
                      <span class="inline-mention ai">@Ariadne</span>
                      <span>! Can you also check </span>
                      <span class="inline-mention channel">#backend</span>
                      <span> for related issues?</span>
                    </div>
                  </div>
                  <button class="send-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="22" y1="2" x2="11" y2="13" />
                      <polygon points="22 2 15 22 11 13 2 9 22 2" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-4 text-sm text-muted">
            <strong>Constraints:</strong>
            <ul style="margin-top: 8px; padding-left: 20px">
              <li>Text input: 40px min  grows  200px max  internal scroll</li>
              <li>Attachment bar: 0px (hidden)  120px max  internal scroll</li>
              <li>Total input area: ~380px max to maintain 200px stream view</li>
              <li>Auto-scroll: Stream scrolls to bottom as input grows</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 11. Conversations Overview -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Conversations Overview</h2>
          <p class="section-subtitle">
            Enhanced stream items with preview, time, badges. Pinned section, sorted by activity. Hover actions.
          </p>
          <span class="section-ref">conversations-overview-01.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <div class="component-label">Stream List</div>
            <div class="stream-list">
              <div class="stream-section-header">Pinned</div>

              <div class="stream-item">
                <div class="stream-avatar channel">#</div>
                <div class="stream-content">
                  <div class="stream-header-row">
                    <span class="stream-name">auth-dev</span>
                    <span class="stream-time">5m</span>
                  </div>
                  <div class="stream-preview"><strong>Alex:</strong> The token refresh is working now</div>
                </div>
                <span class="unread-badge">3</span>
                <div class="stream-hover-actions">
                  <button class="hover-action-btn" title="Unpin">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 2L4 12h5v8l6-10h-5z" />
                    </svg>
                  </button>
                  <button class="hover-action-btn" title="More">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="1" />
                      <circle cx="19" cy="12" r="1" />
                      <circle cx="5" cy="12" r="1" />
                    </svg>
                  </button>
                </div>
              </div>

              <div class="stream-section-header">Recent</div>

              <div class="stream-item active">
                <div class="stream-avatar scratchpad">
                  <span></span>
                  <div class="activity-dot"></div>
                </div>
                <div class="stream-content">
                  <div class="stream-header-row">
                    <span class="stream-name">API Design Notes</span>
                    <span class="stream-time">2m</span>
                  </div>
                  <div class="stream-preview"><strong>Ariadne:</strong> Here's the analysis you requested</div>
                </div>
                <div class="stream-hover-actions">
                  <button class="hover-action-btn" title="Pin">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2L4 12h5v8l6-10h-5z" />
                    </svg>
                  </button>
                  <button class="hover-action-btn" title="Rename">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                      <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                    </svg>
                  </button>
                </div>
              </div>

              <div class="stream-item">
                <div class="stream-avatar dm">JS</div>
                <div class="stream-content">
                  <div class="stream-header-row">
                    <span class="stream-name">Jordan Smith</span>
                    <span class="stream-time">1h</span>
                  </div>
                  <div class="stream-preview"><strong>Jordan:</strong> Thanks for the feedback!</div>
                </div>
                <div class="stream-hover-actions">
                  <button class="hover-action-btn" title="Mute">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M11 5L6 9H2v6h4l5 4V5z" />
                      <line x1="23" y1="9" x2="17" y2="15" />
                      <line x1="17" y1="9" x2="23" y2="15" />
                    </svg>
                  </button>
                </div>
              </div>

              <div class="stream-item">
                <div class="stream-avatar channel">#</div>
                <div class="stream-content">
                  <div class="stream-header-row">
                    <span class="stream-name">announcements</span>
                    <span class="stream-time">3h</span>
                  </div>
                  <div class="stream-preview"><strong>Admin:</strong> Team meeting at 3pm</div>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Stream Item Anatomy</div>
            <div class="demo-container">
              <div style="display: flex; flex-direction: column; gap: 12px; font-size: 13px">
                <div><strong>Avatar:</strong> Icon/emoji for type (# channel,  scratchpad, initials for DM)</div>
                <div><strong>Activity dot:</strong> Pulsing indicator for very recent activity</div>
                <div><strong>Name:</strong> Stream name, truncated with ellipsis</div>
                <div><strong>Preview:</strong> "Author: Message preview..." (truncated)</div>
                <div><strong>Time:</strong> Relative time (5m, 2h, 3d)</div>
                <div><strong>Unread badge:</strong> Count if > 0</div>
                <div><strong>Hover actions:</strong> Pin, Mute, Rename, More menu</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 12. Thread Panel -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Thread Panel System</h2>
          <p class="section-subtitle">
            Overlay  Locked (pinned)  Full-screen. Tabs in locked mode. Resizable with breadcrumbs.
          </p>
          <span class="section-ref">nav-19-hybrid-resizable.html</span>
        </div>

        <div class="component-card" style="max-width: 500px">
          <div class="component-label">Locked Panel with Tabs</div>
          <div class="thread-panel" style="position: relative">
            <div class="resize-handle"></div>
            <div class="thread-panel-header">
              <div class="thread-tabs">
                <div class="thread-tab active">
                  <span class="thread-tab-title">Token refresh</span>
                </div>
                <div class="thread-tab">
                  <span class="thread-tab-title">Race condition</span>
                </div>
              </div>
              <div class="thread-actions">
                <button class="thread-action active" title="Lock Panel">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                    <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                  </svg>
                </button>
                <button class="thread-action" title="Maximize">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 3 21 3 21 9" />
                    <polyline points="9 21 3 21 3 15" />
                    <line x1="21" y1="3" x2="14" y2="10" />
                    <line x1="3" y1="21" x2="10" y2="14" />
                  </svg>
                </button>
                <button class="thread-action" title="Close">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18" />
                    <line x1="6" y1="6" x2="18" y2="18" />
                  </svg>
                </button>
              </div>
            </div>
            <div class="thread-breadcrumb">
              <span class="breadcrumb-item"># auth-dev</span>
              <span class="breadcrumb-sep"></span>
              <span class="breadcrumb-item current">Token refresh</span>
            </div>
            <div class="thread-content">
              <div class="message" style="margin-bottom: 12px">
                <div class="message-avatar" style="width: 28px; height: 28px; font-size: 11px">K</div>
                <div class="message-content">
                  <div class="message-text" style="font-size: 13px">
                    What's causing the race condition in token refresh?
                  </div>
                </div>
              </div>
              <div class="message ai" style="margin: 0 -16px; padding: 12px 16px">
                <div class="message-avatar" style="width: 28px; height: 28px; font-size: 11px">A</div>
                <div class="message-content">
                  <div class="message-text" style="font-size: 13px">
                    The issue is that multiple tabs can trigger refresh simultaneously. We should use BroadcastChannel
                    to coordinate.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="component-card mt-4" style="max-width: 500px">
          <div class="component-label">Deep Nesting Breadcrumbs (>4 levels)</div>
          <div class="thread-breadcrumb" style="border-radius: 8px">
            <span class="breadcrumb-item"># auth-dev</span>
            <span class="breadcrumb-sep"></span>
            <span class="breadcrumb-item">Token refresh</span>
            <span class="breadcrumb-sep"></span>
            <span class="breadcrumb-ellipsis" title="Click to see hidden levels">...</span>
            <span class="breadcrumb-sep"></span>
            <span class="breadcrumb-item">Implementation</span>
            <span class="breadcrumb-sep"></span>
            <span class="breadcrumb-item current">Edge cases</span>
          </div>
          <p class="text-sm text-muted mt-4">
            Show first 2 + "..." + last 2. Ellipsis opens dropdown to select hidden levels.
          </p>
        </div>
      </section>

      <!-- 13. Quick Switcher -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Quick Switcher</h2>
          <p class="section-subtitle">Keyboard-first navigation. Search across all streams.</p>
          <span class="section-ref">quick-switcher-01.html</span>
        </div>

        <div class="component-card" style="max-width: 650px; margin: 0 auto; padding: 40px">
          <div class="quick-switcher">
            <div class="quick-switcher-input-wrapper">
              <input
                type="text"
                class="quick-switcher-input"
                placeholder="Search streams, messages, or commands..."
                value="auth"
              />
            </div>
            <div class="quick-switcher-results">
              <div class="quick-switcher-item selected">
                <div class="stream-avatar channel">#</div>
                <div class="stream-content">
                  <div class="stream-name">auth-dev</div>
                  <div class="stream-preview">Channel  12 members</div>
                </div>
              </div>
              <div class="quick-switcher-item">
                <div class="stream-avatar scratchpad"></div>
                <div class="stream-content">
                  <div class="stream-name">Auth API Design</div>
                  <div class="stream-preview">Scratchpad  Last edited 2h ago</div>
                </div>
              </div>
              <div class="quick-switcher-item">
                <div class="stream-avatar channel">#</div>
                <div class="stream-content">
                  <div class="stream-name">authentication-help</div>
                  <div class="stream-preview">Channel  45 members</div>
                </div>
              </div>
            </div>
            <div class="quick-switcher-footer">
              <div class="quick-switcher-hints">
                <span><span class="hint-key"></span> Open</span>
                <span><span class="hint-key"></span> Navigate</span>
                <span><span class="hint-key">esc</span> Close</span>
              </div>
              <span>K to open</span>
            </div>
          </div>
        </div>
      </section>

      <!-- 14. Messages -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Message Styling</h2>
          <p class="section-subtitle">
            Clean, document-like layout. AI messages have full-width gold gradient + left border accent. All messages
            include a "..." context menu (like Slack) for actions.
          </p>
          <span class="section-ref">nav-16-full-view.html</span>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto">
          <div class="component-label">Conversation Flow (with Context Menus)</div>
          <div style="padding: 24px; overflow: hidden">
            <!-- User message with context menu -->
            <div
              class="message"
              style="position: relative"
              onmouseenter="this.querySelector('.user-menu-btn').style.display = 'flex'"
              onmouseleave="
                if (!this.querySelector('.user-context-menu'))
                  this.querySelector('.user-menu-btn').style.display = 'none'
              "
            >
              <div class="message-avatar">K</div>
              <div class="message-content">
                <div class="message-header">
                  <span class="message-author">Kris</span>
                  <span class="message-time">2:30 PM</span>
                </div>
                <p class="message-text">
                  I'm designing a new authentication system. What's the best approach for handling JWT refresh tokens
                  securely?
                </p>
              </div>

              <!-- Context Menu Button -->
              <div
                class="user-menu-btn"
                style="
                  position: absolute;
                  top: 8px;
                  right: 8px;
                  width: 28px;
                  height: 28px;
                  border-radius: 6px;
                  background: hsl(var(--card));
                  border: 1px solid hsl(var(--border));
                  display: none;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.15s;
                  box-shadow: 0 2px 8px hsl(0 0% 0% / 0.1);
                  z-index: 10;
                "
                onclick="
                  event.stopPropagation()
                  const menu = this.nextElementSibling
                  if (menu.style.display === 'block') {
                    menu.style.display = 'none'
                  } else {
                    menu.style.display = 'block'
                  }
                "
                onmouseenter="
                  this.style.background = 'hsl(var(--muted))'
                  this.style.borderColor = 'hsl(var(--primary) / 0.3)'
                "
                onmouseleave="
                  this.style.background = 'hsl(var(--card))'
                  this.style.borderColor = 'hsl(var(--border))'
                "
              >
                <svg
                  style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <circle cx="12" cy="5" r="2" />
                  <circle cx="12" cy="12" r="2" />
                  <circle cx="12" cy="19" r="2" />
                </svg>
              </div>

              <!-- User Message Context Menu -->
              <div
                class="user-context-menu"
                style="
                  position: absolute;
                  top: 40px;
                  right: 8px;
                  background: hsl(var(--card));
                  border: 1px solid hsl(var(--border));
                  border-radius: 8px;
                  padding: 4px;
                  box-shadow: 0 8px 24px hsl(0 0% 0% / 0.15);
                  min-width: 200px;
                  z-index: 100;
                  display: none;
                "
                onclick="event.stopPropagation()"
              >
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    />
                  </svg>
                  Copy message
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"
                    />
                  </svg>
                  Edit
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
                    />
                  </svg>
                  Start thread
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"
                    />
                  </svg>
                  Save as memo
                </div>
              </div>
            </div>

            <!-- AI message with context menu -->
            <div
              class="message ai"
              style="position: relative"
              onmouseenter="this.querySelector('.ai-menu-btn').style.display = 'flex'"
              onmouseleave="
                if (
                  !this.querySelector('.ai-context-menu') ||
                  this.querySelector('.ai-context-menu').style.display === 'none'
                )
                  this.querySelector('.ai-menu-btn').style.display = 'none'
              "
            >
              <div class="message-avatar">A</div>
              <div class="message-content">
                <div class="message-header">
                  <span class="message-author">Ariadne</span>
                  <span class="message-time">2:30 PM</span>
                </div>
                <p class="message-text">
                  Great question. Based on current security best practices, here's what I recommend:
                </p>
                <div class="message-code">
                  <p class="message-code-title">Refresh Token Best Practices:</p>
                  <ul class="message-code-list">
                    <li>1. Store refresh tokens in HTTP-only cookies, not localStorage</li>
                    <li>2. Implement token rotation on each refresh</li>
                    <li>3. Use short-lived access tokens (15 min) with longer refresh tokens (7 days)</li>
                    <li>4. Maintain a token family for detecting reuse</li>
                  </ul>
                </div>
                <p class="message-text" style="margin-top: 12px">
                  Would you like me to show you a concrete implementation?
                </p>
              </div>

              <!-- Context Menu Button -->
              <div
                class="ai-menu-btn"
                style="
                  position: absolute;
                  top: 8px;
                  right: 8px;
                  width: 28px;
                  height: 28px;
                  border-radius: 6px;
                  background: hsl(var(--card));
                  border: 1px solid hsl(var(--border));
                  display: none;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.15s;
                  box-shadow: 0 2px 8px hsl(0 0% 0% / 0.1);
                  z-index: 10;
                "
                onclick="
                  event.stopPropagation()
                  const menu = this.nextElementSibling
                  if (menu.style.display === 'block') {
                    menu.style.display = 'none'
                  } else {
                    menu.style.display = 'block'
                  }
                "
                onmouseenter="
                  this.style.background = 'hsl(var(--muted))'
                  this.style.borderColor = 'hsl(var(--primary) / 0.3)'
                "
                onmouseleave="
                  this.style.background = 'hsl(var(--card))'
                  this.style.borderColor = 'hsl(var(--border))'
                "
              >
                <svg
                  style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <circle cx="12" cy="5" r="2" />
                  <circle cx="12" cy="12" r="2" />
                  <circle cx="12" cy="19" r="2" />
                </svg>
              </div>

              <!-- AI Message Context Menu -->
              <div
                class="ai-context-menu"
                style="
                  position: absolute;
                  top: 40px;
                  right: 8px;
                  background: hsl(var(--card));
                  border: 1px solid hsl(var(--border));
                  border-radius: 8px;
                  padding: 4px;
                  box-shadow: 0 8px 24px hsl(0 0% 0% / 0.15);
                  min-width: 200px;
                  z-index: 100;
                  display: none;
                "
                onclick="event.stopPropagation()"
              >
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                    />
                  </svg>
                  Show trace and sources
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    />
                  </svg>
                  Copy message
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"
                    />
                  </svg>
                  Save as memo
                </div>
              </div>
            </div>

            <!-- User follow-up -->
            <div class="message">
              <div class="message-avatar">K</div>
              <div class="message-content">
                <div class="message-header">
                  <span class="message-author">Kris</span>
                  <span class="message-time">2:32 PM</span>
                </div>
                <p class="message-text">
                  Yes, especially the token rotation part. How do I handle concurrent requests?
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="component-grid mt-4">
          <div class="component-card">
            <div class="component-label">User Message</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li>Rounded avatar with initials</li>
                <li>Muted background on avatar</li>
                <li>No background on message itself</li>
                <li>Clean, document-like feel</li>
                <li><strong>"..." menu (hover):</strong> Copy, Edit, Start thread, Save as memo</li>
              </ul>
            </div>
          </div>
          <div class="component-card">
            <div class="component-label">AI Message</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li>Full-width gold gradient (fades right)</li>
                <li>3px gold left border accent</li>
                <li>Gold avatar + author name</li>
                <li>Extends past container edges</li>
                <li><strong>"..." menu (hover):</strong> Show trace and sources (primary), Copy, Save as memo</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto; margin-top: 24px">
          <div class="component-label">Context Menu Explained</div>
          <div style="padding: 24px">
            <div style="font-size: 14px; line-height: 1.8">
              <p style="margin-bottom: 12px">
                <strong>All messages</strong> (both user and AI) have a "..." button that appears on hover in the
                top-right corner, similar to Slack's message actions.
              </p>

              <div style="background: hsl(var(--muted) / 0.3); padding: 12px; border-radius: 8px; margin-bottom: 12px">
                <strong>Interaction behavior:</strong>
                <ul style="margin: 8px 0 0 20px; font-size: 13px">
                  <li><strong>Show button:</strong> Appears on message hover</li>
                  <li><strong>Open menu:</strong> Click the "..." button</li>
                  <li><strong>Close menu:</strong> Click the button again OR click outside the menu</li>
                </ul>
              </div>

              <p style="margin-bottom: 12px">
                <strong>For AI messages specifically:</strong> The "Show trace and sources" option is the primary way to
                access the agent's reasoning steps and sources. This design choice keeps the message view clean while
                making transparency easily accessible.
              </p>
              <p style="color: hsl(var(--muted-foreground)); font-size: 13px; font-style: italic">
                Sources are NOT shown prominently in the message view - they're only accessible via the trace modal.
                This prevents cluttering the conversation while maintaining full transparency.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- 15. Agent Trace -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Agent Trace</h2>
          <p class="section-subtitle">
            Full transparency into agent reasoning with bidirectional navigation. Click session event or AI message to
            view trace with sources. Includes icons, animations, tooltips, keyboard shortcuts, and streaming
            preferences.
          </p>
          <span class="section-ref">docs/references/mockups/agent-trace-with-sources.html</span>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto">
          <div class="component-label">AI Message with Context Menu</div>

          <div style="padding: 24px">
            <div
              class="ai-message-demo"
              style="
                position: relative;
                background: linear-gradient(90deg, hsl(var(--primary) / 0.06) 0%, transparent 100%);
                padding: 16px 24px;
                border-left: 3px solid hsl(var(--primary));
                cursor: pointer;
                transition: all 0.15s;
                border-radius: 8px;
              "
              onclick="
                if (event.target.closest('.message-menu-button, .message-context-menu')) return
                document.getElementById('agentTraceDemo').style.display = 'flex'
              "
              onmouseenter="
                this.style.background = 'linear-gradient(90deg, hsl(var(--primary) / 0.1) 0%, transparent 100%)'
                this.querySelector('.trace-hint').style.opacity = '1'
                this.querySelector('.message-menu-button').style.display = 'flex'
              "
              onmouseleave="
                this.style.background = 'linear-gradient(90deg, hsl(var(--primary) / 0.06) 0%, transparent 100%)'
                this.querySelector('.trace-hint').style.opacity = '0'
                if (!this.querySelector('.message-context-menu'))
                  this.querySelector('.message-menu-button').style.display = 'none'
              "
            >
              <!-- Context Menu Button -->
              <div
                class="message-menu-button"
                style="
                  position: absolute;
                  top: 8px;
                  right: 8px;
                  width: 28px;
                  height: 28px;
                  border-radius: 6px;
                  background: hsl(var(--card));
                  border: 1px solid hsl(var(--border));
                  display: none;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.15s;
                  box-shadow: 0 2px 8px hsl(0 0% 0% / 0.1);
                  z-index: 10;
                "
                onclick="
                  event.stopPropagation()
                  const menu = this.nextElementSibling
                  if (menu.style.display === 'block') {
                    menu.style.display = 'none'
                  } else {
                    menu.style.display = 'block'
                  }
                "
                onmouseenter="
                  this.style.background = 'hsl(var(--muted))'
                  this.style.borderColor = 'hsl(var(--primary) / 0.3)'
                "
                onmouseleave="
                  this.style.background = 'hsl(var(--card))'
                  this.style.borderColor = 'hsl(var(--border))'
                "
              >
                <svg
                  style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <circle cx="12" cy="5" r="2" />
                  <circle cx="12" cy="12" r="2" />
                  <circle cx="12" cy="19" r="2" />
                </svg>
              </div>

              <!-- Context Menu Dropdown -->
              <div
                class="message-context-menu"
                style="
                  position: absolute;
                  top: 40px;
                  right: 8px;
                  background: hsl(var(--card));
                  border: 1px solid hsl(var(--border));
                  border-radius: 8px;
                  padding: 4px;
                  box-shadow: 0 8px 24px hsl(0 0% 0% / 0.15);
                  min-width: 200px;
                  z-index: 100;
                  display: none;
                "
                onclick="event.stopPropagation()"
              >
                <div
                  class="menu-item"
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onclick="
                    this.closest('.message-context-menu').style.display = 'none'
                    document.getElementById('agentTraceDemo').style.display = 'flex'
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                    />
                  </svg>
                  Show trace and sources
                </div>
                <div
                  class="menu-item"
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    />
                  </svg>
                  Copy message
                </div>
                <div
                  class="menu-item"
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.15s;
                  "
                  onmouseenter="this.style.background = 'hsl(var(--muted))'"
                  onmouseleave="this.style.background = 'transparent'"
                >
                  <svg
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground))"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"
                    />
                  </svg>
                  Save as memo
                </div>
              </div>

              <div style="display: flex; gap: 14px; align-items: flex-start">
                <div
                  style="
                    width: 36px;
                    height: 36px;
                    border-radius: 10px;
                    background: hsl(var(--primary));
                    color: hsl(var(--primary-foreground));
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 600;
                    font-size: 13px;
                  "
                >
                  A
                </div>
                <div style="flex: 1">
                  <div style="display: flex; align-items: baseline; gap: 8px; margin-bottom: 4px">
                    <span style="font-weight: 600; font-size: 14px; color: hsl(var(--primary))">Ariadne</span>
                    <span style="font-size: 12px; color: hsl(var(--muted-foreground))">2:34 PM</span>
                  </div>
                  <div style="font-size: 14px; line-height: 1.6">
                    NASA's Perseverance rover recently discovered organic molecules in Jezero Crater...
                  </div>
                  <div
                    class="trace-hint"
                    style="
                      font-size: 11px;
                      color: hsl(var(--primary));
                      opacity: 0;
                      transition: opacity 0.15s;
                      margin-top: 4px;
                    "
                  >
                    Click to view trace 
                  </div>
                </div>
              </div>
            </div>

            <div
              style="
                margin-top: 16px;
                padding: 12px;
                background: hsl(var(--muted) / 0.2);
                border-radius: 8px;
                font-size: 13px;
                line-height: 1.6;
              "
            >
              <strong>Context Menu Behavior:</strong>
              <ul style="margin: 8px 0 0 20px">
                <li><strong>Show button:</strong> "..." appears on message hover</li>
                <li><strong>Open menu:</strong> Click the "..." button</li>
                <li><strong>Close menu:</strong> Click the button again OR click outside</li>
              </ul>
              <div style="margin-top: 12px">
                <strong>Two ways to access trace &amp; sources:</strong>
                <ul style="margin: 8px 0 0 20px">
                  <li><strong>Direct:</strong> Click message body  Opens trace scrolled to this response</li>
                  <li><strong>Via menu:</strong> Click "..."  "Show trace and sources"  Same result</li>
                  <li style="margin-top: 4px; color: hsl(var(--muted-foreground)); font-style: italic">
                    Sources are NOT shown in message view - only accessible via trace modal
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto; margin-top: 24px">
          <div class="component-label">Agent Session Event (In-Stream)</div>

          <div style="padding: 24px">
            <div
              style="
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 10px 14px;
                background: hsl(var(--muted) / 0.5);
                border: 1px solid hsl(var(--border));
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.15s;
                font-size: 13px;
              "
              onclick="document.getElementById('agentTraceDemo').style.display = 'flex'"
              onmouseenter="
                this.style.background = 'hsl(var(--muted) / 0.7)'
                this.style.borderColor = 'hsl(var(--primary) / 0.3)'
                this.querySelector('.session-hint').style.opacity = '1'
              "
              onmouseleave="
                this.style.background = 'hsl(var(--muted) / 0.5)'
                this.style.borderColor = 'hsl(var(--border))'
                this.querySelector('.session-hint').style.opacity = '0'
              "
            >
              <div
                style="
                  width: 20px;
                  height: 20px;
                  background: hsl(142 76% 36% / 0.15);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                "
              >
                <svg
                  style="width: 14px; height: 14px; color: hsl(142 76% 36%)"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <div style="flex: 1">
                <div style="font-weight: 500">Session complete</div>
                <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-top: 2px">
                  5 steps  6.3s  1 message sent
                </div>
              </div>
              <div
                class="session-hint"
                style="font-size: 11px; color: hsl(var(--primary)); opacity: 0; transition: opacity 0.15s"
              >
                Show trace and sources 
              </div>
            </div>
          </div>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto; margin-top: 24px">
          <div class="component-label">Step Type Badges (with Icons)</div>

          <div style="padding: 24px">
            <div style="display: flex; flex-direction: column; gap: 16px">
              <div style="display: flex; align-items: center; gap: 12px">
                <div
                  style="
                    padding: 4px 10px;
                    background: hsl(var(--primary) / 0.15);
                    color: hsl(var(--primary));
                    border-radius: 6px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                  "
                >
                  <svg style="width: 14px; height: 14px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
                    />
                  </svg>
                  Thinking
                </div>
                <span style="font-size: 13px; color: hsl(var(--muted-foreground))"
                  >Agent reasoning (lightbulb icon)</span
                >
              </div>
              <div style="display: flex; align-items: center; gap: 12px">
                <div
                  style="
                    padding: 4px 10px;
                    background: hsl(200 70% 50% / 0.15);
                    color: hsl(200 70% 50%);
                    border-radius: 6px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                  "
                >
                  <svg style="width: 14px; height: 14px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                    />
                  </svg>
                  Web Search
                </div>
                <span style="font-size: 13px; color: hsl(var(--muted-foreground))"
                  >Tool calls (magnifying glass icon)</span
                >
              </div>
              <div style="display: flex; align-items: center; gap: 12px">
                <div
                  style="
                    padding: 4px 10px;
                    background: hsl(142 76% 36% / 0.15);
                    color: hsl(142 76% 36%);
                    border-radius: 6px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                  "
                >
                  <svg style="width: 14px; height: 14px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
                    />
                  </svg>
                  Response
                </div>
                <span style="font-size: 13px; color: hsl(var(--muted-foreground))"
                  >Message sent (chat bubble icon)</span
                >
              </div>
            </div>
          </div>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto; margin-top: 24px">
          <div class="component-label">Sources (Compact, Collapsible)</div>

          <div style="padding: 24px">
            <div style="margin-top: 16px">
              <div
                style="
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  cursor: pointer;
                  padding: 8px 0;
                  user-select: none;
                "
                onclick="
                  this.classList.toggle('expanded')
                  this.nextElementSibling.style.display = this.classList.contains('expanded') ? 'block' : 'none'
                  this.querySelector('.chevron').style.transform = this.classList.contains('expanded')
                    ? 'rotate(90deg)'
                    : 'rotate(0deg)'
                "
              >
                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 600">
                  <svg style="width: 16px; height: 16px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"
                    />
                  </svg>
                  Sources
                  <span
                    style="
                      background: hsl(var(--muted));
                      color: hsl(var(--muted-foreground));
                      padding: 2px 6px;
                      border-radius: 10px;
                      font-size: 11px;
                      font-weight: 600;
                    "
                    >4</span
                  >
                </div>
                <svg
                  class="chevron"
                  style="width: 16px; height: 16px; color: hsl(var(--muted-foreground)); transition: transform 0.2s"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </div>

              <div style="display: none; margin-top: 8px">
                <div
                  style="
                    padding: 10px;
                    background: hsl(var(--muted) / 0.3);
                    border-left: 3px solid hsl(200 70% 50%);
                    border-radius: 6px;
                    font-size: 12px;
                  "
                >
                  <!-- Web Source 1 -->
                  <div
                    style="
                      padding: 6px 10px;
                      margin: 0 -10px;
                      border-bottom: 1px solid hsl(var(--border));
                      transition: background 0.15s ease;
                      border-radius: 4px;
                      cursor: pointer;
                    "
                    onmouseenter="
                      this.style.background = 'hsl(var(--muted) / 0.5)'
                      this.querySelector('.source-title').style.color = 'hsl(var(--primary))'
                    "
                    onmouseleave="
                      this.style.background = 'transparent'
                      this.querySelector('.source-title').style.color = 'hsl(var(--foreground))'
                    "
                  >
                    <div
                      class="source-title"
                      style="font-weight: 600; margin-bottom: 4px; font-size: 12px; transition: color 0.15s ease"
                    >
                      NASA JPL - Mars 2020 Mission Updates
                    </div>
                    <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-bottom: 4px">
                      mars.nasa.gov
                    </div>
                    <div style="color: hsl(var(--muted-foreground)); font-size: 11px; line-height: 1.4">
                      Perseverance has discovered organic molecules in Jezero Crater rocks, providing the strongest
                      evidence yet...
                    </div>
                  </div>

                  <!-- Web Source 2 -->
                  <div
                    style="
                      padding: 6px 10px;
                      margin: 0 -10px;
                      border-bottom: 1px solid hsl(var(--border));
                      transition: background 0.15s ease;
                      border-radius: 4px;
                      cursor: pointer;
                    "
                    onmouseenter="
                      this.style.background = 'hsl(var(--muted) / 0.5)'
                      this.querySelector('.source-title').style.color = 'hsl(var(--primary))'
                    "
                    onmouseleave="
                      this.style.background = 'transparent'
                      this.querySelector('.source-title').style.color = 'hsl(var(--foreground))'
                    "
                  >
                    <div
                      class="source-title"
                      style="font-weight: 600; margin-bottom: 4px; font-size: 12px; transition: color 0.15s ease"
                    >
                      Space.com - Perseverance Rover Discovery
                    </div>
                    <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-bottom: 4px">
                      space.com
                    </div>
                    <div style="color: hsl(var(--muted-foreground)); font-size: 11px; line-height: 1.4">
                      The rover's instruments have detected complex organic compounds that could be biosignatures...
                    </div>
                  </div>

                  <!-- Workspace Source 1 -->
                  <div
                    style="
                      padding: 6px 10px;
                      margin: 0 -10px;
                      border-bottom: 1px solid hsl(var(--border));
                      transition: background 0.15s ease;
                      border-radius: 4px;
                      cursor: pointer;
                    "
                    onmouseenter="
                      this.style.background = 'hsl(var(--muted) / 0.5)'
                      this.querySelector('.source-title').style.color = 'hsl(var(--primary))'
                    "
                    onmouseleave="
                      this.style.background = 'transparent'
                      this.querySelector('.source-title').style.color = 'hsl(var(--foreground))'
                    "
                  >
                    <div
                      class="source-title"
                      style="font-weight: 600; margin-bottom: 4px; font-size: 12px; transition: color 0.15s ease"
                    >
                      Martin in #engineering-ideas
                    </div>
                    <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-bottom: 4px">
                      #engineering-ideas  Yesterday at 3:42 PM
                    </div>
                    <div style="color: hsl(var(--muted-foreground)); font-size: 11px; line-height: 1.4">
                      SpaceX's Starship could fundamentally change space exploration. Full reusability means we could
                      reduce launch costs by 100x...
                    </div>
                  </div>

                  <!-- Workspace Source 2 (Last, no border) -->
                  <div
                    style="
                      padding: 6px 10px;
                      margin: 0 -10px;
                      transition: background 0.15s ease;
                      border-radius: 4px;
                      cursor: pointer;
                    "
                    onmouseenter="
                      this.style.background = 'hsl(var(--muted) / 0.5)'
                      this.querySelector('.source-title').style.color = 'hsl(var(--primary))'
                    "
                    onmouseleave="
                      this.style.background = 'transparent'
                      this.querySelector('.source-title').style.color = 'hsl(var(--foreground))'
                    "
                  >
                    <div
                      class="source-title"
                      style="font-weight: 600; margin-bottom: 4px; font-size: 12px; transition: color 0.15s ease"
                    >
                      Anna in #engineering-ideas
                    </div>
                    <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-bottom: 4px">
                      #engineering-ideas  Yesterday at 3:48 PM
                    </div>
                    <div style="color: hsl(var(--muted-foreground)); font-size: 11px; line-height: 1.4">
                      The key insight is vertical integration. SpaceX builds everything in-house, which lets them
                      iterate faster...
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              style="
                margin-top: 24px;
                padding: 12px;
                background: hsl(var(--muted) / 0.2);
                border-radius: 8px;
                font-size: 13px;
                line-height: 1.6;
              "
            >
              <strong>Key Features:</strong>
              <ul style="margin: 8px 0 0 20px">
                <li>Document icon + count badge + chevron that rotates 90 when expanded</li>
                <li>All sources in one compact box with colored left border</li>
                <li>Border color matches step type (blue for tools, gold for thinking, green for response)</li>
                <li>Collapsed by default to keep UI clean</li>
                <li>Entire source item is hoverable/clickable</li>
                <li>Last item has no bottom border for clean look</li>
                <li>Web sources: Title, domain, snippet</li>
                <li>Workspace sources: "Author in #channel", timestamp, message excerpt</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Agent Trace Modal Demo (Hidden by default) -->
      <div
        id="agentTraceDemo"
        style="
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          backdrop-filter: blur(4px);
          display: none;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 40px;
        "
        onclick="if (event.target === this) this.style.display = 'none'"
      >
        <div
          style="
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.3);
          "
          onclick="event.stopPropagation()"
        >
          <div
            style="
              padding: 20px 24px;
              border-bottom: 1px solid hsl(var(--border));
              display: flex;
              align-items: center;
              justify-content: space-between;
            "
          >
            <div>
              <div style="font-size: 18px; font-weight: 600">Agent Session Trace</div>
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 12px;
                  font-size: 12px;
                  color: hsl(var(--muted-foreground));
                  margin-top: 4px;
                "
              >
                <span>Ariadne</span>
                <span></span>
                <span>2:34 PM</span>
                <span></span>
                <span>6.3s</span>
              </div>
            </div>
            <div style="display: flex; align-items: center; gap: 8px">
              <!-- Settings button with tooltip -->
              <div
                style="
                  position: relative;
                  width: 32px;
                  height: 32px;
                  border-radius: 6px;
                  background: transparent;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  color: hsl(var(--muted-foreground));
                  transition: all 0.15s;
                "
                onmouseenter="
                  this.style.background = 'hsl(var(--muted))'
                  this.style.color = 'hsl(var(--foreground))'
                  this.querySelector('.settings-tooltip').style.opacity = '1'
                "
                onmouseleave="
                  this.style.background = 'transparent'
                  this.style.color = 'hsl(var(--muted-foreground))'
                  this.querySelector('.settings-tooltip').style.opacity = '0'
                "
              >
                <svg style="width: 16px; height: 16px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  />
                </svg>
                <div
                  class="settings-tooltip"
                  style="
                    position: absolute;
                    top: -32px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: hsl(var(--foreground));
                    color: hsl(var(--background));
                    padding: 4px 8px;
                    border-radius: 4px;
                    font-size: 11px;
                    white-space: nowrap;
                    opacity: 0;
                    pointer-events: none;
                    transition: opacity 0.15s;
                  "
                >
                  Trace preferences
                </div>
              </div>
              <!-- Close button -->
              <button
                onclick="document.getElementById('agentTraceDemo').style.display = 'none'"
                style="
                  width: 32px;
                  height: 32px;
                  border-radius: 6px;
                  background: transparent;
                  border: none;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  color: hsl(var(--muted-foreground));
                  transition: background 0.15s;
                "
                onmouseenter="this.style.background = 'hsl(var(--muted))'"
                onmouseleave="this.style.background = 'transparent'"
              >
                <svg style="width: 20px; height: 20px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>

          <div style="overflow-y: auto; flex: 1">
            <!-- Thinking Step -->
            <div
              style="
                padding: 20px 24px;
                border-bottom: 1px solid hsl(var(--border));
                background: hsl(var(--primary) / 0.03);
              "
            >
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px">
                <div
                  style="
                    padding: 4px 10px;
                    background: hsl(var(--primary) / 0.15);
                    color: hsl(var(--primary));
                    border-radius: 6px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                  "
                >
                  <svg style="width: 14px; height: 14px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
                    />
                  </svg>
                  Thinking
                </div>
                <span style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-left: auto">0.4s</span>
              </div>
              <div style="font-size: 14px; line-height: 1.6">
                User asks about Mars rover mission and internal space tech discussions. Two-part query: web search for
                news, workspace search for internal discussions.
              </div>
            </div>

            <!-- Tool Step (Web Search) -->
            <div
              style="
                padding: 20px 24px;
                border-bottom: 1px solid hsl(var(--border));
                background: hsl(200 70% 50% / 0.03);
              "
            >
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px">
                <div
                  style="
                    padding: 4px 10px;
                    background: hsl(200 70% 50% / 0.15);
                    color: hsl(200 70% 50%);
                    border-radius: 6px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                  "
                >
                  <svg style="width: 14px; height: 14px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                    />
                  </svg>
                  Web Search
                </div>
                <span style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-left: auto">2.3s</span>
              </div>
              <div style="font-size: 14px; line-height: 1.6">
                <strong>Query:</strong> "Mars rover Perseverance latest news 2026"
              </div>

              <div style="margin-top: 16px">
                <div
                  style="
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    cursor: pointer;
                    padding: 8px 0;
                  "
                  onclick="
                    this.classList.toggle('expanded')
                    this.nextElementSibling.style.display = this.classList.contains('expanded') ? 'block' : 'none'
                    this.querySelector('.chevron-2').style.transform = this.classList.contains('expanded')
                      ? 'rotate(90deg)'
                      : 'rotate(0deg)'
                  "
                >
                  <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 600">
                    <svg style="width: 16px; height: 16px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"
                      />
                    </svg>
                    Sources
                    <span
                      style="
                        background: hsl(var(--muted));
                        color: hsl(var(--muted-foreground));
                        padding: 2px 6px;
                        border-radius: 10px;
                        font-size: 11px;
                        font-weight: 600;
                      "
                      >2</span
                    >
                  </div>
                  <svg
                    class="chevron-2"
                    style="width: 16px; height: 16px; color: hsl(var(--muted-foreground)); transition: transform 0.2s"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                </div>

                <div style="display: none; margin-top: 8px">
                  <div
                    style="
                      padding: 10px;
                      background: hsl(var(--muted) / 0.3);
                      border-left: 3px solid hsl(200 70% 50%);
                      border-radius: 6px;
                      font-size: 12px;
                    "
                  >
                    <div style="padding: 6px 10px; margin: 0 -10px; border-bottom: 1px solid hsl(var(--border))">
                      <div style="font-weight: 600; margin-bottom: 4px; font-size: 12px">
                        NASA JPL - Mars 2020 Mission
                      </div>
                      <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-bottom: 4px">
                        mars.nasa.gov
                      </div>
                      <div style="color: hsl(var(--muted-foreground)); font-size: 11px; line-height: 1.4">
                        Perseverance has discovered organic molecules...
                      </div>
                    </div>
                    <div style="padding: 6px 10px; margin: 0 -10px">
                      <div style="font-weight: 600; margin-bottom: 4px; font-size: 12px">Space.com - Discovery</div>
                      <div style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-bottom: 4px">
                        space.com
                      </div>
                      <div style="color: hsl(var(--muted-foreground)); font-size: 11px; line-height: 1.4">
                        Complex organic compounds detected...
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Response Step -->
            <div style="padding: 20px 24px; background: hsl(142 76% 36% / 0.03)">
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px">
                <div
                  style="
                    padding: 4px 10px;
                    background: hsl(142 76% 36% / 0.15);
                    color: hsl(142 76% 36%);
                    border-radius: 6px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                  "
                >
                  <svg style="width: 14px; height: 14px" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
                    />
                  </svg>
                  Response
                </div>
                <span style="font-size: 11px; color: hsl(var(--muted-foreground)); margin-left: auto">1.7s</span>
              </div>
              <div style="font-size: 14px; line-height: 1.6">
                Sent message: "NASA's Perseverance rover recently discovered organic molecules..."
              </div>
            </div>
          </div>

          <div
            style="
              padding: 16px 24px;
              border-top: 1px solid hsl(var(--border));
              display: flex;
              align-items: center;
              justify-content: space-between;
              font-size: 12px;
              color: hsl(var(--muted-foreground));
            "
          >
            <span>Session completed</span>
            <span>5 steps  1 message sent</span>
          </div>
        </div>
      </div>

      <!-- 16. Message Content Formatting -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Message Content Formatting</h2>
          <p class="section-subtitle">
            Inline styling for @mentions, #channels, /commands, and rich text. Consistent across input and rendered
            messages.
          </p>
          <span class="section-ref">rich-editor.tsx, editor-markdown.ts</span>
        </div>

        <div class="component-card" style="max-width: 800px; margin: 0 auto">
          <div class="component-label">All Inline Styles</div>
          <div class="rendered-content" style="padding: 24px">
            <p>
              Hey <span class="inline-mention me">@Kris</span>,
              <span class="inline-mention user">@Alex Lee</span> mentioned you! I saw
              <span class="inline-mention ai">@Ariadne</span>'s response in
              <span class="inline-mention channel">#auth-dev</span>. The key points are:
            </p>

            <p style="margin-top: 16px">
              <strong>Bold text</strong> for emphasis, <em>italic text</em> for nuance, and <s>strikethrough</s> for
              corrections. Use <code>inline code</code> for technical terms.
            </p>

            <pre><code>// Code blocks for longer snippets
const refreshToken = async (token: string) => {
  const { accessToken, newRefresh } = await rotate(token);
  return { accessToken, refreshToken: newRefresh };
}</code></pre>

            <blockquote>
              Blockquotes are useful for highlighting important quotes or callouts from earlier in the conversation.
            </blockquote>

            <p style="margin-top: 16px">Links look like <a href="#">this documentation</a> with gold underlines.</p>

            <p style="margin-top: 16px">
              Slash commands render as pills: <span class="inline-command">/summarize</span>
              when executed in a message. File references appear as:
              <span
                class="inline-ref"
                style="
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                  padding: 2px 8px;
                  background: hsl(var(--muted));
                  border-radius: 4px;
                  font-size: 13px;
                "
              >
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <polyline points="21 15 16 10 5 21" />
                </svg>
                Image #1
              </span>
            </p>

            <p style="margin-top: 16px">Lists work too:</p>
            <ul>
              <li>Unordered list item one</li>
              <li>Unordered list item two</li>
            </ul>
            <ol>
              <li>Ordered list item one</li>
              <li>Ordered list item two</li>
            </ol>
          </div>
        </div>

        <div class="component-grid mt-4">
          <div class="component-card">
            <div class="component-label">Mentions</div>
            <div class="demo-container" style="display: flex; flex-direction: column; gap: 12px">
              <div>
                <span class="inline-mention user">@Alex Lee</span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >User mention (blue)</span
                >
              </div>
              <div>
                <span class="inline-mention me">@Kris</span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >Current user (gold on blue)  stands out!</span
                >
              </div>
              <div>
                <span class="inline-mention ai">@Ariadne</span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >AI persona (gold)</span
                >
              </div>
              <div>
                <span class="inline-mention channel">#auth-dev</span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >Channel (muted)</span
                >
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Commands & References</div>
            <div class="demo-container" style="display: flex; flex-direction: column; gap: 12px">
              <div>
                <span class="inline-command">/summarize</span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >Executed command (purple)</span
                >
              </div>
              <div>
                <span
                  class="inline-ref"
                  style="
                    display: inline-flex;
                    align-items: center;
                    gap: 4px;
                    padding: 2px 8px;
                    background: hsl(var(--muted));
                    border-radius: 4px;
                    font-size: 13px;
                  "
                >
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                  </svg>
                  report.xlsx
                </span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >File reference</span
                >
              </div>
              <div>
                <span
                  class="inline-ref"
                  style="
                    display: inline-flex;
                    align-items: center;
                    gap: 4px;
                    padding: 2px 8px;
                    background: hsl(var(--muted));
                    border-radius: 4px;
                    font-size: 13px;
                  "
                >
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <polyline points="21 15 16 10 5 21" />
                  </svg>
                  Image #1
                </span>
                <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                  >Image reference</span
                >
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Rich Text</div>
            <div class="demo-container rendered-content" style="font-size: 14px; line-height: 2">
              <strong>Bold</strong>  <em>Italic</em>  <s>Strikethrough</s>  <code>inline code</code> 
              <a href="#">Link</a>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">CSS Classes</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><code>.inline-mention.user</code>  blue tint</li>
                <li><code>.inline-mention.me</code>  gold text on blue (current user)</li>
                <li><code>.inline-mention.ai</code>  gold tint</li>
                <li><code>.inline-mention.channel</code>  muted</li>
                <li><code>.inline-command</code>  purple tint</li>
                <li><code>.inline-ref</code>  muted chip</li>
                <li><code>.rendered-content</code>  wrapper for rich text</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- 16. Code Blocks -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Code Blocks</h2>
          <p class="section-subtitle">
            Linear-style code blocks with language picker (editing) and copy button (viewing). Syntax highlighting
            included.
          </p>
          <span class="section-ref">Linear reference</span>
        </div>

        <div class="component-grid">
          <div class="component-card" style="max-width: 600px">
            <div class="component-label">Editing Mode (Language Picker)</div>
            <div class="code-block">
              <div class="code-block-header">
                <span class="code-block-filename"></span>
                <div class="code-block-actions">
                  <div class="language-picker">
                    <button class="language-picker-btn">
                      TypeScript
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9" />
                      </svg>
                    </button>
                    <div class="language-picker-dropdown">
                      <div class="language-picker-item">Auto detect</div>
                      <div class="language-picker-item">Bash</div>
                      <div class="language-picker-item">CSS</div>
                      <div class="language-picker-item">Go</div>
                      <div class="language-picker-item">HTML</div>
                      <div class="language-picker-item">JSON</div>
                      <div class="language-picker-item">JavaScript</div>
                      <div class="language-picker-item selected">
                        TypeScript
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="20 6 9 17 4 12" />
                        </svg>
                      </div>
                      <div class="language-picker-item">Python</div>
                      <div class="language-picker-item">Rust</div>
                      <div class="language-picker-item">SQL</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="code-block-body">
                <code>
                  <pre
                    style="margin: 0"
                  ><span class="token-keyword">async function</span> <span class="token-function">fetchUser</span>(id: <span class="token-keyword">string</span>) {
  <span class="token-keyword">const</span> response = <span class="token-keyword">await</span> fetch(<span class="token-string">`/api/users/${id}`</span>);
  <span class="token-keyword">return</span> response.json();
}</pre>
                </code>
              </div>
            </div>
            <p class="text-sm text-muted mt-4">
              <strong>Trigger:</strong> Click language name to open picker<br />
              <strong>Auto-detect:</strong> Default option, infers from code
            </p>
          </div>

          <div class="component-card" style="max-width: 600px">
            <div class="component-label">Viewing Mode (Copy on Hover)</div>
            <div class="code-block" style="position: relative">
              <div class="code-block-header">
                <span class="code-block-filename">auth.ts</span>
                <div class="code-block-actions">
                  <button class="code-block-copy" style="opacity: 1" title="Copy code">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="code-block-body">
                <code>
                  <pre
                    style="margin: 0"
                  ><span class="token-keyword">export const</span> <span class="token-function">validateToken</span> = (token: <span class="token-keyword">string</span>) => {
  <span class="token-keyword">if</span> (!token) <span class="token-keyword">throw new</span> Error(<span class="token-string">"Missing token"</span>);
  <span class="token-keyword">return</span> jwt.verify(token, SECRET);
};</pre>
                </code>
              </div>
            </div>
            <p class="text-sm text-muted mt-4">
              <strong>Hover:</strong> Copy button appears in top-right<br />
              <strong>Click:</strong> Copies code, shows checkmark briefly
            </p>
          </div>

          <div class="component-card">
            <div class="component-label">Copy Button States</div>
            <div class="demo-container">
              <div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap">
                <div style="display: flex; align-items: center; gap: 8px">
                  <button class="code-block-copy" style="opacity: 1; position: relative">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                    </svg>
                  </button>
                  <span style="font-size: 13px">Default</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px">
                  <button
                    class="code-block-copy"
                    style="
                      opacity: 1;
                      position: relative;
                      background: hsl(var(--primary) / 0.15);
                      color: hsl(var(--primary));
                    "
                  >
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                    </svg>
                  </button>
                  <span style="font-size: 13px">Hover</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px">
                  <button class="code-block-copy copied" style="opacity: 1; position: relative">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12" />
                    </svg>
                  </button>
                  <span style="font-size: 13px">Copied!</span>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Features</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>Language picker:</strong> Only shown when editing/composing</li>
                <li><strong>Copy button:</strong> Appears on hover when viewing messages</li>
                <li><strong>Filename:</strong> Optional, shown in header left side</li>
                <li><strong>Syntax highlighting:</strong> Keywords, strings, functions, comments</li>
                <li><strong>Feedback:</strong> Checkmark + green tint after copy</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- 17. Image Attachments & Gallery -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Image Attachments & Gallery</h2>
          <p class="section-subtitle">
            Slack-style image previews below messages with attachment pills. Full-screen gallery with thumbnails for
            navigation.
          </p>
          <span class="section-ref">Slack reference</span>
        </div>

        <div class="component-grid">
          <div class="component-card" style="max-width: 600px">
            <div class="component-label">Message with Image Attachments</div>
            <div style="background: hsl(var(--background)); padding: 16px; border-radius: 12px">
              <!-- Message content -->
              <div class="rendered-content" style="margin-bottom: 12px">
                <p>
                  Here are the screenshots from the design review! The header looks great but I think we should tweak
                  the spacing on mobile.
                </p>
              </div>

              <!-- Image previews -->
              <div class="message-attachments">
                <div class="image-preview-grid">
                  <div
                    class="image-preview multi"
                    style="background: linear-gradient(135deg, hsl(200 60% 70%), hsl(220 60% 60%))"
                  >
                    <div
                      style="
                        width: 100%;
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-size: 11px;
                      "
                    >
                      Dashboard.png
                    </div>
                    <div class="image-preview-overlay">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7" />
                      </svg>
                    </div>
                  </div>
                  <div
                    class="image-preview multi"
                    style="background: linear-gradient(135deg, hsl(280 60% 70%), hsl(300 60% 60%))"
                  >
                    <div
                      style="
                        width: 100%;
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-size: 11px;
                      "
                    >
                      Mobile.png
                    </div>
                    <div class="image-preview-overlay">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7" />
                      </svg>
                    </div>
                  </div>
                  <div
                    class="image-preview multi more"
                    style="background: linear-gradient(135deg, hsl(30 60% 70%), hsl(40 70% 60%))"
                  >
                    <div
                      style="
                        width: 100%;
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-size: 11px;
                      "
                    >
                      Settings.png
                    </div>
                    <div class="image-preview-overlay">+2</div>
                  </div>
                </div>

                <!-- Attachment pills -->
                <div class="attachment-pills">
                  <span class="attachment-pill image">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                      <circle cx="8.5" cy="8.5" r="1.5" />
                      <polyline points="21 15 16 10 5 21" />
                    </svg>
                    5 images
                  </span>
                  <span class="attachment-pill">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                      <polyline points="14 2 14 8 20 8" />
                    </svg>
                    spec.pdf
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card" style="max-width: 600px">
            <div class="component-label">Single Image Preview</div>
            <div style="background: hsl(var(--background)); padding: 16px; border-radius: 12px">
              <div class="rendered-content" style="margin-bottom: 12px">
                <p>Check out this error I'm seeing:</p>
              </div>
              <div class="message-attachments">
                <div
                  class="image-preview single"
                  style="background: linear-gradient(135deg, hsl(0 60% 40%), hsl(0 50% 30%)); height: 200px"
                >
                  <div
                    style="
                      width: 100%;
                      height: 100%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      font-size: 12px;
                      padding: 20px;
                      text-align: center;
                    "
                  >
                    Error: Cannot read property 'map' of undefined
                  </div>
                  <div class="image-preview-overlay">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7" />
                    </svg>
                  </div>
                </div>
                <div class="attachment-pills">
                  <span class="attachment-pill image">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                      <circle cx="8.5" cy="8.5" r="1.5" />
                      <polyline points="21 15 16 10 5 21" />
                    </svg>
                    screenshot.png
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="component-card mt-4" style="max-width: 900px; margin-left: auto; margin-right: auto">
          <div class="component-label">Full-Screen Gallery (Click to Open)</div>
          <div class="gallery-overlay" style="position: relative; height: 500px; border-radius: 12px; overflow: hidden">
            <div class="gallery-header">
              <span class="gallery-title">Dashboard.png  1920  1080</span>
              <div class="gallery-actions">
                <button class="gallery-btn" title="Download">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="7 10 12 15 17 10" />
                    <line x1="12" y1="15" x2="12" y2="3" />
                  </svg>
                </button>
                <button class="gallery-btn" title="Close">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18" />
                    <line x1="6" y1="6" x2="18" y2="18" />
                  </svg>
                </button>
              </div>
            </div>
            <div class="gallery-main">
              <button class="gallery-nav prev">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6" />
                </svg>
              </button>
              <div
                style="
                  background: linear-gradient(135deg, hsl(200 60% 70%), hsl(220 60% 60%));
                  width: 600px;
                  height: 300px;
                  border-radius: 8px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: white;
                "
              >
                Dashboard Preview
              </div>
              <button class="gallery-nav next">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6" />
                </svg>
              </button>
            </div>
            <div class="gallery-counter">1 of 5</div>
            <div class="gallery-thumbnails">
              <div
                class="gallery-thumb active"
                style="background: linear-gradient(135deg, hsl(200 60% 70%), hsl(220 60% 60%))"
              ></div>
              <div
                class="gallery-thumb"
                style="background: linear-gradient(135deg, hsl(280 60% 70%), hsl(300 60% 60%))"
              ></div>
              <div
                class="gallery-thumb"
                style="background: linear-gradient(135deg, hsl(30 60% 70%), hsl(40 70% 60%))"
              ></div>
              <div
                class="gallery-thumb"
                style="background: linear-gradient(135deg, hsl(150 60% 60%), hsl(170 60% 50%))"
              ></div>
              <div
                class="gallery-thumb"
                style="background: linear-gradient(135deg, hsl(0 60% 60%), hsl(20 60% 50%))"
              ></div>
            </div>
          </div>
        </div>

        <div class="component-grid mt-4">
          <div class="component-card">
            <div class="component-label">Image Preview Behavior</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>Single image:</strong> Larger preview (max 400300px)</li>
                <li><strong>Multiple images:</strong> Grid of 180180px thumbnails</li>
                <li><strong>4+ images:</strong> Show 3 + "+N more" overlay</li>
                <li><strong>Hover:</strong> Expand icon overlay appears</li>
                <li><strong>Click:</strong> Opens full-screen gallery</li>
              </ul>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Gallery Navigation</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>Arrow keys:</strong> Previous/next image</li>
                <li><strong>Escape:</strong> Close gallery</li>
                <li><strong>Thumbnails:</strong> Click to jump to image</li>
                <li><strong>Counter:</strong> Shows current position (1 of 5)</li>
                <li><strong>Download:</strong> Save current image</li>
              </ul>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Attachment Pills</div>
            <div class="demo-container">
              <div style="display: flex; flex-direction: column; gap: 12px">
                <div>
                  <span class="attachment-pill image">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                      <circle cx="8.5" cy="8.5" r="1.5" />
                      <polyline points="21 15 16 10 5 21" />
                    </svg>
                    3 images
                  </span>
                  <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                    >Image count (gold)</span
                  >
                </div>
                <div>
                  <span class="attachment-pill">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                      <polyline points="14 2 14 8 20 8" />
                    </svg>
                    document.pdf
                  </span>
                  <span style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-left: 8px"
                    >File attachment (muted)</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 18. Minimized Threads Strip -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Minimized Threads Strip</h2>
          <p class="section-subtitle">
            Strip at bottom with activity indicators. Click to restore thread. Shows thread identifiers with activity
            states.
          </p>
          <span class="section-ref">nav-17-thread-panels.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card" style="max-width: 500px">
            <div class="component-label">Minimized Strip (Bottom of Screen)</div>
            <div style="background: hsl(var(--background)); padding: 20px; border-radius: 12px">
              <div class="minimized-strip">
                <span class="minimized-strip-label">Threads</span>
                <div class="minimized-thread-item has-activity" title="Token refresh discussion">T1</div>
                <div class="minimized-thread-item has-mention" title="API rate limiting (mentioned you)">T2</div>
                <div class="minimized-thread-item" title="Database migration">T3</div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Activity States</div>
            <div class="demo-container">
              <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap">
                <div style="display: flex; align-items: center; gap: 8px">
                  <div class="minimized-thread-item has-activity">T1</div>
                  <span style="font-size: 13px">AI activity (gold dot)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px">
                  <div class="minimized-thread-item has-mention">T2</div>
                  <span style="font-size: 13px">Mention (red dot)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px">
                  <div class="minimized-thread-item">T3</div>
                  <span style="font-size: 13px">Quiet (no dot)</span>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Behavior</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>Position:</strong> Fixed strip at bottom of viewport</li>
                <li><strong>Click:</strong> Restores thread to overlay/locked state</li>
                <li><strong>Hover:</strong> Shows full thread title tooltip</li>
                <li><strong>Identifier:</strong> First letters or abbreviation of thread name</li>
                <li><strong>Activity dots:</strong> Gold (AI), Red (mention), None (quiet)</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- 19. AI-Powered Status (Phase 2) -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">AI-Powered Status (Phase 2)</h2>
          <p class="section-subtitle">
            Smart sections that automatically categorize conversations. Needs Attention surfaces urgent items, Active
            shows ongoing, Quiet collapses idle streams.
          </p>
          <span class="section-ref">conversations-overview-01.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card" style="max-width: 320px">
            <div class="component-label">Status-Based Stream List</div>
            <div style="background: hsl(var(--background)); padding: 12px; border-radius: 12px">
              <!-- Needs Attention -->
              <div class="status-section needs-attention">
                <div class="status-section-header">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9" />
                  </svg>
                  <span>Needs Attention</span>
                  <span class="status-section-count">2</span>
                </div>
                <div class="status-section-items">
                  <div class="status-item">
                    <div class="status-item-indicator" style="background: hsl(var(--activity-mention))"></div>
                    <div class="status-item-icon">#</div>
                    <div class="status-item-name">auth-dev</div>
                    <div class="status-item-reason">@you mentioned</div>
                  </div>
                  <div class="status-item">
                    <div class="status-item-indicator" style="background: hsl(var(--activity-ai))"></div>
                    <div class="status-item-icon"></div>
                    <div class="status-item-name">API Design</div>
                    <div class="status-item-reason">Question for you</div>
                  </div>
                </div>
              </div>

              <!-- Active -->
              <div class="status-section active">
                <div class="status-section-header">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9" />
                  </svg>
                  <span>Active</span>
                  <span class="status-section-count">3</span>
                </div>
                <div class="status-section-items">
                  <div class="status-item">
                    <div class="status-item-indicator" style="background: hsl(var(--activity-ai))"></div>
                    <div class="status-item-icon"></div>
                    <div class="status-item-name">Brainstorm</div>
                    <div class="status-item-reason">5m ago</div>
                  </div>
                  <div class="status-item">
                    <div class="status-item-indicator" style="background: hsl(var(--activity-people))"></div>
                    <div class="status-item-icon">JS</div>
                    <div class="status-item-name">Jordan Smith</div>
                    <div class="status-item-reason">12m ago</div>
                  </div>
                </div>
              </div>

              <!-- Quiet (collapsed) -->
              <div class="status-section quiet collapsed">
                <div class="status-section-header">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9" />
                  </svg>
                  <span>Quiet</span>
                  <span class="status-section-count">5</span>
                </div>
                <div class="status-section-items">
                  <!-- Hidden when collapsed -->
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">Section Types</div>
            <div class="demo-container">
              <div style="display: flex; flex-direction: column; gap: 16px; font-size: 13px">
                <div>
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px">
                    <span
                      class="status-section-count"
                      style="background: hsl(var(--activity-mention) / 0.15); color: hsl(var(--activity-mention))"
                      >2</span
                    >
                    <strong>Needs Attention</strong>
                  </div>
                  <div style="color: hsl(var(--muted-foreground))">Questions waiting on you, mentions, follow-ups</div>
                </div>
                <div>
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px">
                    <span
                      class="status-section-count"
                      style="background: hsl(var(--primary) / 0.15); color: hsl(var(--primary))"
                      >3</span
                    >
                    <strong>Active</strong>
                  </div>
                  <div style="color: hsl(var(--muted-foreground))">Recent activity, ongoing conversations</div>
                </div>
                <div>
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px">
                    <span
                      class="status-section-count"
                      style="background: hsl(var(--muted)); color: hsl(var(--muted-foreground))"
                      >5</span
                    >
                    <strong>Quiet</strong>
                  </div>
                  <div style="color: hsl(var(--muted-foreground))">No recent activity, collapsed by default</div>
                </div>
              </div>
            </div>
          </div>

          <div class="component-card">
            <div class="component-label">AI Classification</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>Mention detection:</strong> @you in any message</li>
                <li><strong>Question detection:</strong> AI identifies questions directed at you</li>
                <li><strong>Follow-up detection:</strong> Conversations awaiting your response</li>
                <li><strong>Activity decay:</strong> Streams move to Quiet after inactivity</li>
                <li><strong>Manual override:</strong> Pin important streams to stay visible</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- 20. Breadcrumb Dropdown -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">Breadcrumb Dropdown</h2>
          <p class="section-subtitle">
            When breadcrumbs are truncated with "...", clicking reveals a dropdown to navigate to hidden levels.
          </p>
          <span class="section-ref">nav-19-hybrid-resizable.html</span>
        </div>

        <div class="component-grid">
          <div class="component-card" style="max-width: 500px">
            <div class="component-label">Ellipsis with Dropdown</div>
            <div class="demo-container" style="padding: 24px">
              <div class="thread-breadcrumb" style="border-radius: 8px; position: relative">
                <span class="breadcrumb-item"># auth-dev</span>
                <span class="breadcrumb-sep"></span>
                <span class="breadcrumb-item">Token refresh</span>
                <span class="breadcrumb-sep"></span>
                <span class="breadcrumb-dropdown-wrapper">
                  <span
                    class="breadcrumb-ellipsis"
                    style="background: hsl(var(--primary) / 0.15); color: hsl(var(--primary))"
                    >...</span
                  >
                  <div class="breadcrumb-dropdown">
                    <div class="breadcrumb-dropdown-item">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 10h10a8 8 0 018 8v4M3 10l6 6m-6-6l6-6" />
                      </svg>
                      <span>Race condition</span>
                      <span class="breadcrumb-depth">Level 3</span>
                    </div>
                    <div class="breadcrumb-dropdown-item">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 10h10a8 8 0 018 8v4M3 10l6 6m-6-6l6-6" />
                      </svg>
                      <span>Mutex solutions</span>
                      <span class="breadcrumb-depth">Level 4</span>
                    </div>
                  </div>
                </span>
                <span class="breadcrumb-sep"></span>
                <span class="breadcrumb-item">Implementation</span>
                <span class="breadcrumb-sep"></span>
                <span class="breadcrumb-item current">Edge cases</span>
              </div>
            </div>
            <p class="text-sm text-muted mt-4">
              <strong>Trigger:</strong> Click on "..." to reveal hidden levels<br />
              <strong>Selection:</strong> Click item to navigate directly to that level<br />
              <strong>Depth indicator:</strong> Shows nesting level for orientation
            </p>
          </div>

          <div class="component-card">
            <div class="component-label">Truncation Rules</div>
            <div class="demo-container">
              <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px">
                <li><strong>4 levels:</strong> Show all breadcrumbs, no ellipsis</li>
                <li><strong>>4 levels:</strong> Show first 2 + "..." + last 2</li>
                <li><strong>Ellipsis click:</strong> Opens dropdown with hidden levels</li>
                <li><strong>Each item:</strong> Shows thread icon, name, and depth</li>
                <li><strong>Navigation:</strong> Click jumps directly to that thread level</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Design Principles -->
      <section class="section" style="border-bottom: none">
        <div class="section-header">
          <h2 class="section-title">Design Principles</h2>
          <p class="section-subtitle">Key principles that guide all design decisions.</p>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <div class="component-label">Visual</div>
            <ul style="font-size: 14px; line-height: 1.8; padding-left: 20px">
              <li>Clean, modern, bold without being flashy</li>
              <li>AI-native feel</li>
              <li>Gold accents used sparingly ("reward, not noise")</li>
              <li>Support both light and dark mode</li>
            </ul>
          </div>

          <div class="component-card">
            <div class="component-label">Interaction</div>
            <ul style="font-size: 14px; line-height: 1.8; padding-left: 20px">
              <li>Sort by relevance, not by type</li>
              <li>No numbers by default (invitation, not obligation)</li>
              <li>Avoid mouse-only interactions</li>
              <li>Multiple views/threads open simultaneously</li>
            </ul>
          </div>

          <div class="component-card">
            <div class="component-label">Technical</div>
            <ul style="font-size: 14px; line-height: 1.8; padding-left: 20px">
              <li>WCAG 2.1 AA accessibility</li>
              <li>URL-based state (persist on refresh)</li>
              <li>Links for navigation (cmd+click support)</li>
              <li>Use Shadcn UI, restyle as needed</li>
            </ul>
          </div>

          <div class="component-card">
            <div class="component-label">Layout</div>
            <ul style="font-size: 14px; line-height: 1.8; padding-left: 20px">
              <li>Message input at bottom</li>
              <li>Messages top-to-bottom (newest at bottom)</li>
              <li>Thread panels: overlay  locked  fullscreen</li>
              <li>Max 3 visible streams</li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <script>
      function toggleTheme() {
        document.documentElement.classList.toggle("dark")
      }

      // Auto-resize textareas
      document.querySelectorAll(".text-input").forEach((textarea) => {
        textarea.addEventListener("input", function () {
          this.style.height = "auto"
          this.style.height = Math.min(this.scrollHeight, 200) + "px"
        })
      })
    </script>
  </body>
</html>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nav 13: Top Bar + Aligned Sidebar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --background: 40 20% 98%;
        --foreground: 30 10% 12%;
        --card: 40 15% 99%;
        --primary: 38 65% 50%;
        --primary-foreground: 40 20% 98%;
        --secondary: 35 10% 92%;
        --muted: 35 12% 93%;
        --muted-foreground: 30 8% 45%;
        --border: 35 15% 88%;

        --label-auth: 280 60% 55%;
        --label-launch: 150 60% 45%;
        --label-design: 30 70% 50%;
        --label-hiring: 200 60% 50%;

        --activity-ai: 38 65% 50%;
        --activity-mention: 350 70% 50%;
        --activity-people: 200 60% 50%;
      }
      .dark {
        --background: 30 15% 8%;
        --foreground: 35 15% 92%;
        --card: 30 12% 11%;
        --primary: 40 55% 55%;
        --primary-foreground: 30 15% 8%;
        --secondary: 30 10% 18%;
        --muted: 30 10% 15%;
        --muted-foreground: 35 10% 55%;
        --border: 30 10% 20%;
      }
      body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
      }

      /* Top bar - mission control style */
      .top-bar {
        height: 44px;
        background: hsl(var(--card));
        border-bottom: 1px solid hsl(var(--border));
        display: flex;
        align-items: center;
        padding: 0 12px;
        gap: 4px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 80;
      }

      .top-toggle {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
        flex-shrink: 0;
      }
      .top-toggle:hover {
        background: hsl(var(--muted));
      }
      .top-toggle svg {
        width: 16px;
        height: 16px;
        color: hsl(var(--muted-foreground));
      }

      /* Label tabs in top bar */
      .top-labels {
        display: flex;
        gap: 2px;
        flex: 1;
        overflow-x: auto;
        padding: 4px 0;
      }

      .top-label {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
        white-space: nowrap;
        position: relative;
      }
      .top-label:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .top-label.active {
        background: hsl(var(--muted));
      }

      .top-label-dot {
        width: 8px;
        height: 8px;
        border-radius: 2px;
        flex-shrink: 0;
      }
      .top-label-name {
        font-size: 12px;
        font-weight: 500;
      }

      /* Activity glow under label */
      .top-label-glow {
        position: absolute;
        bottom: 2px;
        left: 8px;
        right: 8px;
        height: 3px;
        border-radius: 2px;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      .glow-pulse {
        animation: pulse 2s ease-in-out infinite;
      }

      .top-actions {
        display: flex;
        gap: 8px;
        flex-shrink: 0;
      }
      .top-btn {
        padding: 6px 10px;
        font-size: 11px;
        border-radius: 6px;
        cursor: pointer;
        background: hsl(var(--muted) / 0.5);
        color: hsl(var(--muted-foreground));
        transition: all 0.15s ease;
      }
      .top-btn:hover {
        background: hsl(var(--muted));
      }

      /* Main layout */
      .app-layout {
        display: flex;
        min-height: 100vh;
        padding-top: 44px;
      }
      .app-layout.sidebar-right {
        flex-direction: row-reverse;
      }

      /* Sidebar */
      .sidebar {
        width: var(--sidebar-width, 260px);
        background: hsl(var(--card));
        border-right: 1px solid hsl(var(--border));
        display: flex;
        flex-shrink: 0;
        transition:
          width 0.25s ease,
          margin 0.25s ease;
      }
      .app-layout.sidebar-right .sidebar {
        border-right: none;
        border-left: 1px solid hsl(var(--border));
      }
      .app-layout.sidebar-collapsed .sidebar {
        width: 6px;
        overflow: hidden;
      }

      /* Color strip */
      .color-strip {
        width: 6px;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
      }

      .color-segment {
        position: relative;
        cursor: pointer;
        transition: filter 0.15s ease;
      }
      .color-segment:hover {
        filter: brightness(1.15);
      }
      .color-segment.active {
        filter: brightness(1.2);
      }

      /* Activity dot on segment */
      .color-segment::after {
        content: "";
        position: absolute;
        right: 1px;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 4px;
        border-radius: 50%;
        opacity: 0;
      }
      .color-segment.has-activity::after {
        opacity: 1;
      }

      .color-auth {
        background: hsl(var(--label-auth));
      }
      .color-launch {
        background: hsl(var(--label-launch));
      }
      .color-design {
        background: hsl(var(--label-design));
      }
      .color-hiring {
        background: hsl(var(--label-hiring) / 0.4);
      }

      .activity-ai::after {
        background: hsl(var(--activity-ai));
        box-shadow: 0 0 4px hsl(var(--activity-ai));
      }
      .activity-mention::after {
        background: hsl(var(--activity-mention));
        box-shadow: 0 0 4px hsl(var(--activity-mention));
      }
      .activity-people::after {
        background: hsl(var(--activity-people));
        box-shadow: 0 0 4px hsl(var(--activity-people));
      }

      /* Sidebar content */
      .sidebar-content {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 8px;
        opacity: 1;
        transition: opacity 0.2s ease;
      }
      .app-layout.sidebar-collapsed .sidebar-content {
        opacity: 0;
        pointer-events: none;
      }

      .label-section {
        margin-bottom: 4px;
      }

      .label-header {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        cursor: pointer;
        border-radius: 8px;
        transition: background 0.15s ease;
      }
      .label-header:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .label-dot {
        width: 10px;
        height: 10px;
        border-radius: 3px;
      }
      .label-name {
        font-size: 13px;
        font-weight: 600;
        flex: 1;
      }
      .label-activity {
        width: 4px;
        height: 18px;
        border-radius: 2px;
      }

      .label-items {
        padding: 2px 0 8px 0;
      }

      .stream-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px 8px 20px;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .stream-item:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .stream-activity {
        width: 3px;
        height: 16px;
        border-radius: 2px;
      }
      .stream-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: hsl(var(--muted-foreground));
      }
      .stream-name {
        font-size: 12px;
        flex: 1;
      }
      .stream-badge {
        font-size: 9px;
        padding: 2px 5px;
        border-radius: 3px;
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
      }

      .muted {
        color: hsl(var(--muted-foreground));
      }

      /* Main content */
      .main-content {
        flex: 1;
        padding: 24px;
        min-width: 0;
      }
    </style>
  </head>
  <body>
    <!-- Top bar -->
    <div class="top-bar">
      <div class="top-toggle" onclick="toggleSidebar()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" />
          <line x1="9" y1="3" x2="9" y2="21" />
        </svg>
      </div>

      <div class="top-labels">
        <div class="top-label active" data-section="auth" onclick="scrollToSection('auth')">
          <div class="top-label-dot" style="background: hsl(var(--label-auth))"></div>
          <span class="top-label-name">Auth Project</span>
          <div class="top-label-glow glow-pulse" style="background: hsl(var(--activity-ai))"></div>
        </div>
        <div class="top-label" data-section="launch" onclick="scrollToSection('launch')">
          <div class="top-label-dot" style="background: hsl(var(--label-launch))"></div>
          <span class="top-label-name">Q1 Launch</span>
          <div class="top-label-glow" style="background: hsl(var(--activity-mention))"></div>
        </div>
        <div class="top-label" data-section="design" onclick="scrollToSection('design')">
          <div class="top-label-dot" style="background: hsl(var(--label-design))"></div>
          <span class="top-label-name">Design System</span>
          <div class="top-label-glow" style="background: hsl(var(--activity-people))"></div>
        </div>
        <div class="top-label" data-section="hiring" onclick="scrollToSection('hiring')">
          <div class="top-label-dot" style="background: hsl(var(--label-hiring))"></div>
          <span class="top-label-name muted">Hiring</span>
        </div>
      </div>

      <div class="top-actions">
        <div class="top-btn">‚åòK</div>
        <button class="top-btn" onclick="toggleSide()">Swap</button>
        <button class="top-btn" onclick="document.body.classList.toggle('dark')">Theme</button>
      </div>
    </div>

    <div class="app-layout" id="app">
      <div class="sidebar" id="sidebar">
        <div class="color-strip" id="colorStrip">
          <div class="color-segment color-auth has-activity activity-ai" data-section="auth"></div>
          <div class="color-segment color-launch has-activity activity-mention" data-section="launch"></div>
          <div class="color-segment color-design has-activity activity-people" data-section="design"></div>
          <div class="color-segment color-hiring" data-section="hiring"></div>
        </div>

        <div class="sidebar-content" id="sidebarContent">
          <div class="label-section" data-section="auth">
            <div class="label-header">
              <div class="label-dot" style="background: hsl(var(--label-auth))"></div>
              <span class="label-name">Auth Project</span>
              <div class="label-activity" style="background: hsl(var(--activity-ai))"></div>
            </div>
            <div class="label-items">
              <div class="stream-item">
                <div class="stream-activity" style="background: hsl(var(--activity-ai))"></div>
                <div class="stream-icon">üìù</div>
                <span class="stream-name font-medium">Auth Scratchpad</span>
              </div>
              <div class="stream-item muted">
                <div class="stream-activity" style="background: transparent"></div>
                <div class="stream-icon">#</div>
                <span class="stream-name"># auth-dev</span>
              </div>
              <div class="stream-item muted">
                <div class="stream-activity" style="background: transparent"></div>
                <div class="stream-icon">‚Ü©</div>
                <span class="stream-name">Security review</span>
                <span class="stream-badge">thread</span>
              </div>
            </div>
          </div>

          <div class="label-section" data-section="launch">
            <div class="label-header">
              <div class="label-dot" style="background: hsl(var(--label-launch))"></div>
              <span class="label-name">Q1 Launch</span>
              <div class="label-activity" style="background: hsl(var(--activity-mention))"></div>
            </div>
            <div class="label-items">
              <div class="stream-item">
                <div class="stream-activity" style="background: hsl(var(--activity-mention))"></div>
                <div class="stream-icon">#</div>
                <span class="stream-name font-semibold"># engineering</span>
              </div>
              <div class="stream-item">
                <div class="stream-activity" style="background: hsl(var(--activity-people))"></div>
                <div class="stream-icon">‚Ü©</div>
                <span class="stream-name">Launch planning</span>
                <span class="stream-badge">thread</span>
              </div>
            </div>
          </div>

          <div class="label-section" data-section="design">
            <div class="label-header">
              <div class="label-dot" style="background: hsl(var(--label-design))"></div>
              <span class="label-name">Design System</span>
              <div class="label-activity" style="background: hsl(var(--activity-people))"></div>
            </div>
            <div class="label-items">
              <div class="stream-item">
                <div class="stream-activity" style="background: hsl(var(--activity-people))"></div>
                <div class="stream-icon">#</div>
                <span class="stream-name"># design</span>
              </div>
              <div class="stream-item muted">
                <div class="stream-activity" style="background: transparent"></div>
                <div class="stream-icon">üìù</div>
                <span class="stream-name">Component ideas</span>
              </div>
            </div>
          </div>

          <div class="label-section" data-section="hiring">
            <div class="label-header">
              <div class="label-dot" style="background: hsl(var(--label-hiring))"></div>
              <span class="label-name muted">Hiring</span>
            </div>
            <div class="label-items">
              <div class="stream-item muted">
                <div class="stream-activity" style="background: transparent"></div>
                <div class="stream-icon">#</div>
                <span class="stream-name"># hiring</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="main-content">
        <div class="max-w-xl">
          <h2 class="text-lg font-bold mb-2">Nav 13: Top Bar + Sidebar</h2>
          <p class="text-sm mb-4" style="color: hsl(var(--muted-foreground))">
            Top bar shows all labels with activity glows. Click to jump to section in sidebar. Sidebar can collapse to
            just the color strip. Colors are now aligned between top bar, strip, and content.
          </p>
          <div class="p-4 rounded-xl" style="background: hsl(var(--muted))">
            <p class="text-sm font-medium mb-2">Two-level navigation:</p>
            <ul class="text-sm space-y-1" style="color: hsl(var(--muted-foreground))">
              <li>‚Ä¢ <b>Top bar:</b> Quick overview of all labels + activity</li>
              <li>‚Ä¢ <b>Sidebar:</b> Full detail, collapsible to color strip</li>
              <li>‚Ä¢ Click top label ‚Üí scrolls sidebar to that section</li>
              <li>‚Ä¢ Same color system throughout (label colors + activity)</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      const app = document.getElementById("app")
      const sidebar = document.getElementById("sidebar")
      const sidebarContent = document.getElementById("sidebarContent")
      const colorStrip = document.getElementById("colorStrip")

      function toggleSidebar() {
        app.classList.toggle("sidebar-collapsed")
      }

      function toggleSide() {
        app.classList.toggle("sidebar-right")
      }

      function scrollToSection(section) {
        // Update active states
        document.querySelectorAll(".top-label").forEach((l) => l.classList.remove("active"))
        document.querySelectorAll(".color-segment").forEach((s) => s.classList.remove("active"))

        const topLabel = document.querySelector(`.top-label[data-section="${section}"]`)
        const segment = document.querySelector(`.color-segment[data-section="${section}"]`)
        const labelSection = document.querySelector(`.label-section[data-section="${section}"]`)

        if (topLabel) topLabel.classList.add("active")
        if (segment) segment.classList.add("active")

        // Expand sidebar if collapsed
        app.classList.remove("sidebar-collapsed")

        // Scroll to section
        if (labelSection) {
          setTimeout(() => {
            labelSection.scrollIntoView({ behavior: "smooth", block: "start" })
          }, 100)
        }
      }

      // Sync color strip heights
      function syncHeights() {
        const sections = document.querySelectorAll(".label-section")
        const segments = document.querySelectorAll(".color-segment")

        sections.forEach((section, i) => {
          if (segments[i]) {
            segments[i].style.height = `${section.offsetHeight}px`
          }
        })
      }

      syncHeights()
      window.addEventListener("resize", syncHeights)

      // Click on color segment
      document.querySelectorAll(".color-segment").forEach((seg) => {
        seg.addEventListener("click", () => {
          scrollToSection(seg.dataset.section)
        })
      })
    </script>
  </body>
</html>

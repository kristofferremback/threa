<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nav 14: Hover Margin + Activity Stripes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --background: 40 20% 98%;
        --foreground: 30 10% 12%;
        --card: 40 15% 99%;
        --primary: 38 65% 50%;
        --primary-foreground: 40 20% 98%;
        --secondary: 35 10% 92%;
        --muted: 35 12% 93%;
        --muted-foreground: 30 8% 45%;
        --border: 35 15% 88%;

        --label-auth: 280 60% 55%;
        --label-launch: 150 60% 45%;
        --label-design: 30 70% 50%;
        --label-hiring: 200 60% 50%;

        --activity-ai: 38 65% 50%;
        --activity-mention: 350 70% 50%;
        --activity-people: 200 60% 50%;
      }
      .dark {
        --background: 30 15% 8%;
        --foreground: 35 15% 92%;
        --card: 30 12% 11%;
        --primary: 40 55% 55%;
        --primary-foreground: 30 15% 8%;
        --secondary: 30 10% 18%;
        --muted: 30 10% 15%;
        --muted-foreground: 35 10% 55%;
        --border: 30 10% 20%;
      }
      body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
      }

      /* Top bar */
      .top-bar {
        height: 44px;
        background: hsl(var(--card));
        border-bottom: 1px solid hsl(var(--border));
        display: flex;
        align-items: center;
        padding: 0 12px;
        gap: 4px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 80;
      }

      .top-toggle {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
        flex-shrink: 0;
      }
      .top-toggle:hover {
        background: hsl(var(--muted));
      }
      .top-toggle svg {
        width: 16px;
        height: 16px;
        color: hsl(var(--muted-foreground));
      }

      .top-labels {
        display: flex;
        gap: 2px;
        flex: 1;
        overflow-x: auto;
        padding: 4px 0;
      }

      .top-label {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
        white-space: nowrap;
        position: relative;
      }
      .top-label:hover {
        background: hsl(var(--muted) / 0.5);
      }
      .top-label.active {
        background: hsl(var(--muted));
      }

      .top-label-dot {
        width: 8px;
        height: 8px;
        border-radius: 2px;
      }
      .top-label-name {
        font-size: 12px;
        font-weight: 500;
      }

      /* Activity glow - can be striped for multiple activities */
      .top-label-glow {
        position: absolute;
        bottom: 2px;
        left: 8px;
        right: 8px;
        height: 3px;
        border-radius: 2px;
        overflow: hidden;
        display: flex;
      }
      .top-label-glow .glow-stripe {
        flex: 1;
        height: 100%;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      .glow-pulse {
        animation: pulse 2s ease-in-out infinite;
      }

      .top-actions {
        display: flex;
        gap: 8px;
        flex-shrink: 0;
      }
      .top-btn {
        padding: 6px 10px;
        font-size: 11px;
        border-radius: 6px;
        cursor: pointer;
        background: hsl(var(--muted) / 0.5);
        color: hsl(var(--muted-foreground));
        transition: all 0.15s ease;
      }
      .top-btn:hover {
        background: hsl(var(--muted));
      }

      /* Main layout */
      .app-layout {
        display: flex;
        min-height: 100vh;
        padding-top: 44px;
      }
      .app-layout.sidebar-right {
        flex-direction: row-reverse;
      }

      /* Sidebar wrapper - includes hover margin */
      .sidebar-wrapper {
        position: relative;
        display: flex;
        flex-shrink: 0;
      }

      /* Invisible hover margin */
      .hover-margin {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 100%;
        width: 30px;
        z-index: 40;
      }
      .app-layout.sidebar-right .hover-margin {
        left: auto;
        right: 100%;
      }
      .app-layout.sidebar-open .hover-margin {
        display: none;
      }

      /* Sidebar */
      .sidebar {
        width: var(--sidebar-width, 260px);
        background: hsl(var(--card));
        border-right: 1px solid hsl(var(--border));
        display: flex;
        flex-shrink: 0;
        transition: width 0.25s ease;
      }
      .app-layout.sidebar-right .sidebar {
        border-right: none;
        border-left: 1px solid hsl(var(--border));
      }
      .app-layout.sidebar-collapsed .sidebar {
        width: 6px;
      }
      .sidebar.preview {
        width: var(--sidebar-width, 260px);
        position: absolute;
        top: 44px;
        bottom: 0;
        left: 0;
        z-index: 50;
        box-shadow: 4px 0 24px hsl(var(--foreground) / 0.1);
      }
      .app-layout.sidebar-right .sidebar.preview {
        left: auto;
        right: 0;
        box-shadow: -4px 0 24px hsl(var(--foreground) / 0.1);
      }

      /* Color strip with activity stripes */
      .color-strip {
        width: 6px;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
      }

      .color-segment {
        position: relative;
        cursor: pointer;
        transition: filter 0.15s ease;
        display: flex;
        flex-direction: column;
      }
      .color-segment:hover {
        filter: brightness(1.15);
      }

      /* Base label color */
      .segment-base {
        position: absolute;
        inset: 0;
        opacity: 0.3;
      }

      /* Activity stripes overlay */
      .segment-stripes {
        position: relative;
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      .activity-stripe {
        flex: 1;
        min-height: 4px;
      }

      .color-auth .segment-base {
        background: hsl(var(--label-auth));
      }
      .color-launch .segment-base {
        background: hsl(var(--label-launch));
      }
      .color-design .segment-base {
        background: hsl(var(--label-design));
      }
      .color-hiring .segment-base {
        background: hsl(var(--label-hiring));
      }

      .stripe-ai {
        background: hsl(var(--activity-ai));
      }
      .stripe-mention {
        background: hsl(var(--activity-mention));
      }
      .stripe-people {
        background: hsl(var(--activity-people));
      }
      .stripe-quiet {
        background: hsl(var(--muted-foreground) / 0.15);
      }

      /* Sidebar content */
      .sidebar-content {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 8px;
        opacity: 1;
        transition: opacity 0.2s ease;
      }
      .app-layout.sidebar-collapsed .sidebar:not(.preview) .sidebar-content {
        opacity: 0;
        pointer-events: none;
      }

      .label-section {
        margin-bottom: 4px;
      }

      .label-header {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        cursor: pointer;
        border-radius: 8px;
        transition: background 0.15s ease;
      }
      .label-header:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .label-dot {
        width: 10px;
        height: 10px;
        border-radius: 3px;
      }
      .label-name {
        font-size: 13px;
        font-weight: 600;
        flex: 1;
      }

      /* Multiple activity indicators next to label */
      .label-activities {
        display: flex;
        gap: 2px;
      }
      .label-activity-pip {
        width: 4px;
        height: 18px;
        border-radius: 2px;
      }

      .label-items {
        padding: 2px 0 8px 0;
      }

      .stream-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px 8px 20px;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .stream-item:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .stream-activity {
        width: 3px;
        height: 16px;
        border-radius: 2px;
      }
      .stream-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: hsl(var(--muted-foreground));
      }
      .stream-name {
        font-size: 12px;
        flex: 1;
      }
      .stream-badge {
        font-size: 9px;
        padding: 2px 5px;
        border-radius: 3px;
        background: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
      }

      .muted {
        color: hsl(var(--muted-foreground));
      }

      .main-content {
        flex: 1;
        padding: 24px;
        min-width: 0;
      }
    </style>
  </head>
  <body>
    <div class="top-bar">
      <div class="top-toggle" onclick="toggleSidebar()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" />
          <line x1="9" y1="3" x2="9" y2="21" />
        </svg>
      </div>

      <div class="top-labels">
        <!-- Auth: just AI activity -->
        <div class="top-label active" data-section="auth" onclick="scrollToSection('auth')">
          <div class="top-label-dot" style="background: hsl(var(--label-auth))"></div>
          <span class="top-label-name">Auth Project</span>
          <div class="top-label-glow glow-pulse">
            <div class="glow-stripe" style="background: hsl(var(--activity-ai))"></div>
          </div>
        </div>

        <!-- Q1 Launch: BOTH mention AND AI activity - striped! -->
        <div class="top-label" data-section="launch" onclick="scrollToSection('launch')">
          <div class="top-label-dot" style="background: hsl(var(--label-launch))"></div>
          <span class="top-label-name">Q1 Launch</span>
          <div class="top-label-glow">
            <div class="glow-stripe" style="background: hsl(var(--activity-mention))"></div>
            <div class="glow-stripe" style="background: hsl(var(--activity-ai))"></div>
          </div>
        </div>

        <!-- Design: people activity -->
        <div class="top-label" data-section="design" onclick="scrollToSection('design')">
          <div class="top-label-dot" style="background: hsl(var(--label-design))"></div>
          <span class="top-label-name">Design System</span>
          <div class="top-label-glow">
            <div class="glow-stripe" style="background: hsl(var(--activity-people))"></div>
          </div>
        </div>

        <!-- Hiring: no activity -->
        <div class="top-label" data-section="hiring" onclick="scrollToSection('hiring')">
          <div class="top-label-dot" style="background: hsl(var(--label-hiring))"></div>
          <span class="top-label-name muted">Hiring</span>
        </div>
      </div>

      <div class="top-actions">
        <div class="top-btn">‚åòK</div>
        <button class="top-btn" onclick="toggleSide()">Swap</button>
        <button class="top-btn" onclick="document.body.classList.toggle('dark')">Theme</button>
      </div>
    </div>

    <div class="app-layout sidebar-collapsed" id="app">
      <div class="sidebar-wrapper">
        <!-- Invisible hover margin -->
        <div class="hover-margin" id="hoverMargin"></div>

        <div class="sidebar" id="sidebar">
          <!-- Color strip with activity stripes -->
          <div class="color-strip" id="colorStrip">
            <!-- Auth: single AI activity -->
            <div class="color-segment color-auth" data-section="auth">
              <div class="segment-base"></div>
              <div class="segment-stripes">
                <div class="activity-stripe stripe-ai"></div>
              </div>
            </div>

            <!-- Q1 Launch: striped - mention + AI -->
            <div class="color-segment color-launch" data-section="launch">
              <div class="segment-base"></div>
              <div class="segment-stripes">
                <div class="activity-stripe stripe-mention"></div>
                <div class="activity-stripe stripe-ai"></div>
              </div>
            </div>

            <!-- Design: people activity -->
            <div class="color-segment color-design" data-section="design">
              <div class="segment-base"></div>
              <div class="segment-stripes">
                <div class="activity-stripe stripe-people"></div>
              </div>
            </div>

            <!-- Hiring: quiet -->
            <div class="color-segment color-hiring" data-section="hiring">
              <div class="segment-base"></div>
              <div class="segment-stripes">
                <div class="activity-stripe stripe-quiet"></div>
              </div>
            </div>
          </div>

          <div class="sidebar-content" id="sidebarContent">
            <div class="label-section" data-section="auth">
              <div class="label-header">
                <div class="label-dot" style="background: hsl(var(--label-auth))"></div>
                <span class="label-name">Auth Project</span>
                <div class="label-activities">
                  <div class="label-activity-pip" style="background: hsl(var(--activity-ai))"></div>
                </div>
              </div>
              <div class="label-items">
                <div class="stream-item">
                  <div class="stream-activity" style="background: hsl(var(--activity-ai))"></div>
                  <div class="stream-icon">üìù</div>
                  <span class="stream-name font-medium">Auth Scratchpad</span>
                </div>
                <div class="stream-item muted">
                  <div class="stream-activity" style="background: transparent"></div>
                  <div class="stream-icon">#</div>
                  <span class="stream-name"># auth-dev</span>
                </div>
                <div class="stream-item muted">
                  <div class="stream-activity" style="background: transparent"></div>
                  <div class="stream-icon">‚Ü©</div>
                  <span class="stream-name">Security review</span>
                  <span class="stream-badge">thread</span>
                </div>
              </div>
            </div>

            <!-- Q1 Launch: multiple activities -->
            <div class="label-section" data-section="launch">
              <div class="label-header">
                <div class="label-dot" style="background: hsl(var(--label-launch))"></div>
                <span class="label-name">Q1 Launch</span>
                <div class="label-activities">
                  <div class="label-activity-pip" style="background: hsl(var(--activity-mention))"></div>
                  <div class="label-activity-pip" style="background: hsl(var(--activity-ai))"></div>
                </div>
              </div>
              <div class="label-items">
                <div class="stream-item">
                  <div class="stream-activity" style="background: hsl(var(--activity-mention))"></div>
                  <div class="stream-icon">#</div>
                  <span class="stream-name font-semibold"># engineering</span>
                </div>
                <div class="stream-item">
                  <div class="stream-activity" style="background: hsl(var(--activity-ai))"></div>
                  <div class="stream-icon">‚Ü©</div>
                  <span class="stream-name">Launch planning</span>
                  <span class="stream-badge">thread</span>
                </div>
              </div>
            </div>

            <div class="label-section" data-section="design">
              <div class="label-header">
                <div class="label-dot" style="background: hsl(var(--label-design))"></div>
                <span class="label-name">Design System</span>
                <div class="label-activities">
                  <div class="label-activity-pip" style="background: hsl(var(--activity-people))"></div>
                </div>
              </div>
              <div class="label-items">
                <div class="stream-item">
                  <div class="stream-activity" style="background: hsl(var(--activity-people))"></div>
                  <div class="stream-icon">#</div>
                  <span class="stream-name"># design</span>
                </div>
                <div class="stream-item muted">
                  <div class="stream-activity" style="background: transparent"></div>
                  <div class="stream-icon">üìù</div>
                  <span class="stream-name">Component ideas</span>
                </div>
              </div>
            </div>

            <div class="label-section" data-section="hiring">
              <div class="label-header">
                <div class="label-dot" style="background: hsl(var(--label-hiring))"></div>
                <span class="label-name muted">Hiring</span>
              </div>
              <div class="label-items">
                <div class="stream-item muted">
                  <div class="stream-activity" style="background: transparent"></div>
                  <div class="stream-icon">#</div>
                  <span class="stream-name"># hiring</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="main-content">
        <div class="max-w-xl">
          <h2 class="text-lg font-bold mb-2">Nav 14: Hover Margin + Activity Stripes</h2>
          <p class="text-sm mb-4" style="color: hsl(var(--muted-foreground))">
            30px invisible hover margin triggers sidebar preview. Color strip shows striped activity when multiple types
            exist (see Q1 Launch with red + gold stripes).
          </p>
          <div class="p-4 rounded-xl" style="background: hsl(var(--muted))">
            <p class="text-sm font-medium mb-2">Activity stripes:</p>
            <ul class="text-sm space-y-1" style="color: hsl(var(--muted-foreground))">
              <li>‚Ä¢ <b>Single activity:</b> Solid color (Auth = gold AI)</li>
              <li>‚Ä¢ <b>Multiple activities:</b> Striped (Q1 = red mention + gold AI)</li>
              <li>‚Ä¢ <b>No activity:</b> Muted/faded (Hiring)</li>
              <li>‚Ä¢ Hover near strip ‚Üí sidebar previews as overlay</li>
              <li>‚Ä¢ Toggle button pins it open</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      const app = document.getElementById("app")
      const sidebar = document.getElementById("sidebar")
      const hoverMargin = document.getElementById("hoverMargin")
      const colorStrip = document.getElementById("colorStrip")
      const sidebarContent = document.getElementById("sidebarContent")

      let isOpen = false
      let isHovering = false

      function toggleSidebar() {
        isOpen = !isOpen
        app.classList.toggle("sidebar-collapsed", !isOpen)
        app.classList.toggle("sidebar-open", isOpen)
        if (isOpen) {
          sidebar.classList.remove("preview")
        }
      }

      function toggleSide() {
        app.classList.toggle("sidebar-right")
      }

      function scrollToSection(section) {
        document.querySelectorAll(".top-label").forEach((l) => l.classList.remove("active"))
        const topLabel = document.querySelector(`.top-label[data-section="${section}"]`)
        if (topLabel) topLabel.classList.add("active")

        // Open sidebar
        if (!isOpen) {
          isOpen = true
          app.classList.remove("sidebar-collapsed")
          app.classList.add("sidebar-open")
          sidebar.classList.remove("preview")
        }

        const labelSection = document.querySelector(`.label-section[data-section="${section}"]`)
        if (labelSection) {
          setTimeout(() => {
            labelSection.scrollIntoView({ behavior: "smooth", block: "start" })
          }, 100)
        }
      }

      // Sync heights
      function syncHeights() {
        const sections = document.querySelectorAll(".label-section")
        const segments = document.querySelectorAll(".color-segment")
        sections.forEach((section, i) => {
          if (segments[i]) {
            segments[i].style.height = `${section.offsetHeight}px`
          }
        })
      }
      syncHeights()
      window.addEventListener("resize", syncHeights)

      // Hover margin triggers preview
      function showPreview() {
        if (!isOpen) {
          isHovering = true
          sidebar.classList.add("preview")
        }
      }

      function hidePreview() {
        isHovering = false
        setTimeout(() => {
          if (!isHovering && !isOpen) {
            sidebar.classList.remove("preview")
          }
        }, 150)
      }

      hoverMargin.addEventListener("mouseenter", showPreview)
      hoverMargin.addEventListener("mouseleave", hidePreview)

      colorStrip.addEventListener("mouseenter", showPreview)
      colorStrip.addEventListener("mouseleave", hidePreview)

      sidebar.addEventListener("mouseenter", () => {
        isHovering = true
      })
      sidebar.addEventListener("mouseleave", hidePreview)

      // Color segment click
      document.querySelectorAll(".color-segment").forEach((seg) => {
        seg.addEventListener("click", () => scrollToSection(seg.dataset.section))
      })

      // Toggle button hover
      document.querySelector(".top-toggle").addEventListener("mouseenter", showPreview)
      document.querySelector(".top-toggle").addEventListener("mouseleave", hidePreview)
    </script>
  </body>
</html>

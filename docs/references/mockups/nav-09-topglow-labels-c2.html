<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nav 09c2: Full Drawer Drop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --background: 40 20% 98%;
        --foreground: 30 10% 12%;
        --card: 40 15% 99%;
        --primary: 38 65% 50%;
        --primary-foreground: 40 20% 98%;
        --secondary: 35 10% 92%;
        --muted: 35 12% 93%;
        --muted-foreground: 30 8% 45%;
        --border: 35 15% 88%;
      }
      .dark {
        --background: 30 15% 8%;
        --foreground: 35 15% 92%;
        --card: 30 12% 11%;
        --primary: 40 55% 55%;
        --primary-foreground: 30 15% 8%;
        --secondary: 30 10% 18%;
        --muted: 30 10% 15%;
        --muted-foreground: 35 10% 55%;
        --border: 30 10% 20%;
      }
      body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
      }

      /* Top bar with labeled segments */
      .top-bar {
        background: hsl(var(--card));
        border-bottom: 1px solid hsl(var(--border));
        position: relative;
        z-index: 50;
      }

      .segment-row {
        display: flex;
        padding: 0 8px;
      }

      .label-segment {
        flex: 1;
        padding: 10px 12px;
        cursor: pointer;
        transition: all 0.15s ease;
        position: relative;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .label-segment:hover {
        background: hsl(var(--muted) / 0.3);
      }
      .label-segment.active {
        background: hsl(var(--muted) / 0.5);
      }

      .segment-color {
        width: 8px;
        height: 8px;
        border-radius: 2px;
        flex-shrink: 0;
      }
      .segment-name {
        font-size: 12px;
        font-weight: 500;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Glow underline */
      .segment-glow {
        position: absolute;
        bottom: 0;
        left: 8px;
        right: 8px;
        height: 3px;
        border-radius: 2px 2px 0 0;
      }

      .glow-ai {
        background: hsl(var(--primary));
      }
      .glow-mention {
        background: hsl(350 70% 50%);
      }
      .glow-people {
        background: hsl(200 60% 50%);
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      .glow-pulse {
        animation: pulse 2s ease-in-out infinite;
      }

      /* Full-width drawer */
      .drawer {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: hsl(var(--card));
        border-bottom: 1px solid hsl(var(--border));
        box-shadow: 0 8px 32px hsl(var(--foreground) / 0.06);
        max-height: 0;
        overflow: hidden;
        transition:
          max-height 0.3s ease,
          padding 0.3s ease;
        z-index: 40;
      }
      .drawer.open {
        max-height: 400px;
        padding: 16px 24px;
      }

      .drawer-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-bottom: 12px;
        border-bottom: 1px solid hsl(var(--border));
        margin-bottom: 16px;
      }
      .drawer-title {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .drawer-color {
        width: 14px;
        height: 14px;
        border-radius: 4px;
      }
      .drawer-name {
        font-size: 15px;
        font-weight: 600;
      }
      .drawer-close {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        cursor: pointer;
        color: hsl(var(--muted-foreground));
        transition: all 0.15s ease;
      }
      .drawer-close:hover {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
      }

      /* Stream list in drawer */
      .stream-list {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      .stream-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 14px;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .stream-item:hover {
        background: hsl(var(--muted) / 0.5);
      }

      .stream-glow {
        width: 4px;
        height: 28px;
        border-radius: 2px;
        flex-shrink: 0;
      }
      .stream-icon {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        background: hsl(var(--muted));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        flex-shrink: 0;
      }
      .stream-content {
        flex: 1;
        min-width: 0;
      }
      .stream-name {
        font-size: 13px;
        font-weight: 500;
      }
      .stream-meta {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
      }
      .stream-type {
        font-size: 10px;
        padding: 3px 8px;
        border-radius: 4px;
        background: hsl(var(--secondary));
        color: hsl(var(--muted-foreground));
        flex-shrink: 0;
      }
      .stream-time {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
        flex-shrink: 0;
      }

      .main-content {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      /* Right side controls */
      .controls {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 0 12px;
        margin-left: auto;
      }
      .control-btn {
        padding: 6px 12px;
        font-size: 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.15s ease;
      }
      .control-btn:hover {
        background: hsl(var(--muted) / 0.5);
      }

      /* Backdrop when drawer is open */
      .backdrop {
        position: fixed;
        inset: 0;
        background: hsl(var(--foreground) / 0.1);
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s ease;
        z-index: 30;
      }
      .backdrop.visible {
        opacity: 1;
        visibility: visible;
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col">
    <div class="backdrop" id="backdrop" onclick="closeDrawer()"></div>

    <div class="top-bar">
      <div class="segment-row">
        <div class="label-segment" onclick="openDrawer('auth', this)">
          <div class="segment-color" style="background: hsl(280 60% 55%)"></div>
          <span class="segment-name">Auth Project</span>
          <div class="segment-glow glow-ai glow-pulse"></div>
        </div>
        <div class="label-segment" onclick="openDrawer('launch', this)">
          <div class="segment-color" style="background: hsl(150 60% 45%)"></div>
          <span class="segment-name">Q1 Launch</span>
          <div class="segment-glow glow-mention"></div>
        </div>
        <div class="label-segment" onclick="openDrawer('design', this)">
          <div class="segment-color" style="background: hsl(30 70% 50%)"></div>
          <span class="segment-name">Design System</span>
          <div class="segment-glow glow-people"></div>
        </div>
        <div class="label-segment" onclick="openDrawer('hiring', this)">
          <div class="segment-color" style="background: hsl(200 60% 50%)"></div>
          <span class="segment-name" style="color: hsl(var(--muted-foreground))">Hiring</span>
        </div>

        <div class="controls">
          <div class="control-btn" style="background: hsl(var(--muted) / 0.3); color: hsl(var(--muted-foreground))">
            âŒ˜K
          </div>
          <button onclick="document.body.classList.toggle('dark')" class="control-btn">Theme</button>
        </div>
      </div>

      <!-- Full-width drawer -->
      <div class="drawer" id="drawer">
        <div class="drawer-header">
          <div class="drawer-title">
            <div class="drawer-color" id="drawer-color"></div>
            <span class="drawer-name" id="drawer-name"></span>
          </div>
          <div class="drawer-close" onclick="closeDrawer()">âœ•</div>
        </div>
        <div class="stream-list" id="drawer-content"></div>
      </div>
    </div>

    <div class="main-content">
      <div class="text-center max-w-lg">
        <h2 class="text-lg font-bold mb-2">09c2: Full Drawer Drop</h2>
        <p class="text-sm mb-4" style="color: hsl(var(--muted-foreground))">
          Click a label tab to reveal a full-width drawer with that label's streams. Clean list view instead of pill
          items. Drawer slides down smoothly with backdrop.
        </p>
        <div class="p-4 rounded-xl text-left" style="background: hsl(var(--muted))">
          <p class="text-sm font-medium mb-2">Improvements over 09c:</p>
          <ul class="text-sm space-y-1" style="color: hsl(var(--muted-foreground))">
            <li>â€¢ Full drawer instead of inline pills</li>
            <li>â€¢ Proper list layout for streams</li>
            <li>â€¢ More room for metadata</li>
            <li>â€¢ Backdrop focuses attention</li>
            <li>â€¢ Click outside to dismiss</li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      const drawerData = {
        auth: {
          color: "hsl(280 60% 55%)",
          name: "Auth Project",
          items: [
            {
              name: "Auth Scratchpad",
              meta: "AI is analyzing your notes...",
              type: "pad",
              glow: "hsl(var(--primary))",
              icon: "ðŸ“",
              time: "now",
            },
            {
              name: "# auth-dev",
              meta: "12 members â€¢ Last message 5m ago",
              type: "channel",
              glow: "",
              icon: "#",
              time: "5m",
            },
            {
              name: "Security review thread",
              meta: "From # auth-dev â€¢ 8 replies",
              type: "thread",
              glow: "",
              icon: "â†©",
              time: "1h",
            },
            { name: "Security team", meta: "3 people", type: "group", glow: "", icon: "ðŸ‘¥", time: "2d", muted: true },
          ],
        },
        launch: {
          color: "hsl(150 60% 45%)",
          name: "Q1 Launch",
          items: [
            {
              name: "# engineering",
              meta: "@you was mentioned by Sarah",
              type: "channel",
              glow: "hsl(350 70% 50%)",
              icon: "#",
              time: "2m",
            },
            {
              name: "Launch planning",
              meta: "Sarah is typing...",
              type: "thread",
              glow: "hsl(200 60% 50%)",
              icon: "â†©",
              time: "now",
            },
            {
              name: "# marketing",
              meta: "8 members â€¢ Quiet for 2 hours",
              type: "channel",
              glow: "",
              icon: "#",
              time: "2h",
              muted: true,
            },
          ],
        },
        design: {
          color: "hsl(30 70% 50%)",
          name: "Design System",
          items: [
            {
              name: "# design",
              meta: "Marcus is online",
              type: "channel",
              glow: "hsl(200 60% 50%)",
              icon: "#",
              time: "15m",
            },
            { name: "Component ideas", meta: "Your scratchpad", type: "pad", glow: "", icon: "ðŸ“", time: "3h" },
          ],
        },
        hiring: {
          color: "hsl(200 60% 50%)",
          name: "Hiring",
          items: [
            {
              name: "# hiring",
              meta: "5 members â€¢ No activity today",
              type: "channel",
              glow: "",
              icon: "#",
              time: "1d",
              muted: true,
            },
            {
              name: "Candidate notes",
              meta: "Your scratchpad",
              type: "pad",
              glow: "",
              icon: "ðŸ“",
              time: "1w",
              muted: true,
            },
          ],
        },
      }

      let activeSegment = null

      function openDrawer(name, el) {
        const data = drawerData[name]
        if (!data) return

        // Update active state
        document.querySelectorAll(".label-segment").forEach((s) => s.classList.remove("active"))
        el.classList.add("active")
        activeSegment = el

        // Update drawer content
        document.getElementById("drawer-color").style.background = data.color
        document.getElementById("drawer-name").textContent = data.name

        const content = document.getElementById("drawer-content")
        content.innerHTML = data.items
          .map(
            (item) => `
        <div class="stream-item" style="${item.muted ? "opacity: 0.6" : ""}">
          <div class="stream-glow" style="background: ${item.glow || "transparent"}"></div>
          <div class="stream-icon">${item.icon}</div>
          <div class="stream-content">
            <div class="stream-name">${item.name}</div>
            <div class="stream-meta">${item.meta}</div>
          </div>
          <span class="stream-type">${item.type}</span>
          <span class="stream-time">${item.time}</span>
        </div>
      `
          )
          .join("")

        // Show drawer
        document.getElementById("drawer").classList.add("open")
        document.getElementById("backdrop").classList.add("visible")
      }

      function closeDrawer() {
        document.getElementById("drawer").classList.remove("open")
        document.getElementById("backdrop").classList.remove("visible")
        document.querySelectorAll(".label-segment").forEach((s) => s.classList.remove("active"))
        activeSegment = null
      }
    </script>
  </body>
</html>
